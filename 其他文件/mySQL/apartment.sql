-- MySQL dump 10.13  Distrib 5.7.9, for osx10.9 (x86_64)
--
-- Host: localhost    Database: WenHuiApartment
-- ------------------------------------------------------
-- Server version	5.5.42

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `T_ANSWER_RECORD`
--

DROP TABLE IF EXISTS `T_ANSWER_RECORD`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_ANSWER_RECORD` (
  `pk_answer_record_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '答题记录表编号',
  `answer_record_answer` longtext CHARACTER SET utf8 NOT NULL COMMENT '答案',
  `answer_record_time` datetime NOT NULL COMMENT '记录添加时间',
  `answer_record_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `fk_answer_record_user_id` int(11) NOT NULL COMMENT '答题人',
  `fk_answer_record_question_id` int(11) NOT NULL COMMENT '题目id',
  PRIMARY KEY (`pk_answer_record_id`),
  KEY `fk_T_ANSWER_RECORD_T_USER1_idx` (`fk_answer_record_user_id`),
  KEY `fk_T_ANSWER_RECORD_T_QUESTION1_idx` (`fk_answer_record_question_id`),
  CONSTRAINT `fk_T_ANSER_RECORD_T_QUESTION1` FOREIGN KEY (`fk_answer_record_question_id`) REFERENCES `T_QUESTION` (`pk_question_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_ANSER_RECORD_T_USER1` FOREIGN KEY (`fk_answer_record_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=26 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_ANSWER_RECORD`
--

LOCK TABLES `T_ANSWER_RECORD` WRITE;
/*!40000 ALTER TABLE `T_ANSWER_RECORD` DISABLE KEYS */;
INSERT INTO `T_ANSWER_RECORD` VALUES (21,'4','2016-04-16 14:48:27',1,1,1),(22,'2','2016-04-16 14:48:27',1,1,2),(23,'2','2016-04-16 14:48:27',1,1,3),(24,'4','2016-04-16 14:48:27',1,1,4),(25,'2','2016-04-16 14:48:27',1,1,5);
/*!40000 ALTER TABLE `T_ANSWER_RECORD` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_ARGUMENT`
--

DROP TABLE IF EXISTS `T_ARGUMENT`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_ARGUMENT` (
  `pk_argument_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '论据表编号',
  `argument_content` varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '论据内容',
  `argument_support` int(11) NOT NULL DEFAULT '0' COMMENT '点赞量',
  `argument_belong` int(11) NOT NULL COMMENT '所属正反方',
  `argument_time` datetime NOT NULL COMMENT '记录添加时间',
  `argument_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `fk_argument_thesis_id` int(11) NOT NULL COMMENT '辩题编号',
  `fk_argument_user_id` int(11) NOT NULL COMMENT '辩论人编号',
  `fk_argument_state_id` int(11) NOT NULL DEFAULT '10' COMMENT '匿名状态',
  PRIMARY KEY (`pk_argument_id`),
  KEY `fk_T_ARGUEMENT_T_THESIS1_idx` (`fk_argument_thesis_id`),
  KEY `fk_T_ARGUEMENT_T_USER1_idx` (`fk_argument_user_id`),
  KEY `fk_T_ARGUEMENT_T_STATE1_idx` (`fk_argument_state_id`),
  CONSTRAINT `fk_T_ARGUEMENT_T_STATE1` FOREIGN KEY (`fk_argument_state_id`) REFERENCES `T_STATE` (`pk_state_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_ARGUEMENT_T_THESIS1` FOREIGN KEY (`fk_argument_thesis_id`) REFERENCES `T_THESIS` (`pk_thesis_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_ARGUEMENT_T_USER1` FOREIGN KEY (`fk_argument_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=42 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_ARGUMENT`
--

LOCK TABLES `T_ARGUMENT` WRITE;
/*!40000 ALTER TABLE `T_ARGUMENT` DISABLE KEYS */;
INSERT INTO `T_ARGUMENT` VALUES (39,'我是正方',0,1,'2016-04-16 14:18:11',1,1,1,10),(40,'我是正方222',1,1,'2016-04-16 14:45:45',1,1,1,10),(41,'我是反方',1,0,'2016-04-16 14:46:11',1,1,1,9);
/*!40000 ALTER TABLE `T_ARGUMENT` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_ARGUMENT_SUP_RECORD`
--

DROP TABLE IF EXISTS `T_ARGUMENT_SUP_RECORD`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_ARGUMENT_SUP_RECORD` (
  `pk_support_record_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '论据点赞记录表编号',
  `support_record_time` datetime NOT NULL COMMENT '记录添加时间',
  `support_record_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `fk_argument_sup_record_argument_id` int(11) NOT NULL COMMENT '论据编号',
  `fk_argument_sup_record_user_id` int(11) NOT NULL COMMENT '点赞人编号',
  PRIMARY KEY (`pk_support_record_id`),
  KEY `fk_T_ARGUMENT_SUPPORT_T_ARGUMENT1_idx` (`fk_argument_sup_record_argument_id`),
  KEY `fk_T_ARGUMENT_SUPPORT_T_USER1_idx` (`fk_argument_sup_record_user_id`),
  CONSTRAINT `fk_T_ARGUMENT_SUPPORT_T_ARGUMENT1` FOREIGN KEY (`fk_argument_sup_record_argument_id`) REFERENCES `T_ARGUMENT` (`pk_argument_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_ARGUMENT_SUPPORT_T_USER1` FOREIGN KEY (`fk_argument_sup_record_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_ARGUMENT_SUP_RECORD`
--

LOCK TABLES `T_ARGUMENT_SUP_RECORD` WRITE;
/*!40000 ALTER TABLE `T_ARGUMENT_SUP_RECORD` DISABLE KEYS */;
INSERT INTO `T_ARGUMENT_SUP_RECORD` VALUES (1,'2016-04-16 14:45:56',1,40,1),(2,'2016-04-16 14:47:52',1,41,1);
/*!40000 ALTER TABLE `T_ARGUMENT_SUP_RECORD` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_BOOK`
--

DROP TABLE IF EXISTS `T_BOOK`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_BOOK` (
  `pk_book_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '图书表编号',
  `book_name` longtext COLLATE utf8_unicode_ci NOT NULL COMMENT '图书名称',
  `book_author` longtext COLLATE utf8_unicode_ci COMMENT '图书作者',
  `book_publish_time` datetime DEFAULT NULL COMMENT '图书出版时间',
  `book_cover_url` longtext COLLATE utf8_unicode_ci COMMENT '图书封面',
  `book_publisher` longtext COLLATE utf8_unicode_ci COMMENT '图书出版社',
  `book_summary` longtext COLLATE utf8_unicode_ci COMMENT '图书简介',
  `book_comment_count` int(11) NOT NULL DEFAULT '0' COMMENT '图书评论数量',
  `book_collect_number` int(11) NOT NULL DEFAULT '0' COMMENT '收藏图书人数',
  `book_time` datetime NOT NULL COMMENT '记录添加时间',
  `book_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `fk_book_field_id` int(11) NOT NULL COMMENT '图书所在领域',
  `fk_book_user_id` int(11) NOT NULL COMMENT '图书贡献者',
  `fk_book_state_id` int(11) NOT NULL DEFAULT '11' COMMENT '图书状态',
  PRIMARY KEY (`pk_book_id`),
  KEY `fk_T_BOOK_T_FIELD1_idx` (`fk_book_field_id`),
  KEY `fk_T_BOOK_T_USER1_idx` (`fk_book_user_id`),
  KEY `fk_T_BOOK_T_STATE1_idx` (`fk_book_state_id`),
  CONSTRAINT `fk_T_BOOK_T_FIELD1` FOREIGN KEY (`fk_book_field_id`) REFERENCES `T_FIELD` (`pk_field_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_BOOK_T_STATE1` FOREIGN KEY (`fk_book_state_id`) REFERENCES `T_STATE` (`pk_state_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_BOOK_T_USER1` FOREIGN KEY (`fk_book_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=53 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_BOOK`
--

LOCK TABLES `T_BOOK` WRITE;
/*!40000 ALTER TABLE `T_BOOK` DISABLE KEYS */;
INSERT INTO `T_BOOK` VALUES (1,'睡在我上铺的兄弟','高晓松 / 张琦 ','2016-03-01 00:00:00','201604081829075295.jpg','民主与建设出版社','那些陪你一起喝酒一起疯狂一起傻×的兄弟，\n那些和你一起欢笑一起流泪一起担当的朋友。\n第一次参加自己感兴趣的社团，\n第一次作为学长去迎新，\n第一次暗恋，第一次表白，\n第一次和兄弟吵架，\n第一次宿醉，\n带着青涩感觉的初恋里的第一次牵手，\n第一次害羞的吻，\n第一次和心爱的人期许未来……\n我只是用最为真实的故事讲述了当年最为真实的我们，\n也是最为真实的你们。\n和兄弟有关的故事尚未讲完，\n和青春有关的岁月仍在上演。\n让我们用理想，写下永不服输，让我们为我们的青春欢呼！',0,0,'2015-10-10 10:00:00',1,5,1,12),(2,'极简宇宙史','[法]克里斯托弗·加尔法德 ','2016-03-01 00:00:00','201604081829084126.jpg','上海三联书店','我们的存在的确让太阳系与众不同。夏夜，你躺在沙滩上，仰望夜空。一颗小小的流星安静滑过，还来不及许愿，不可思议的事情发生了：你一下子穿越五十亿年，走进时光的旅行……\n霍金亲传弟子、物理学博士克里斯托弗·加尔法德带领我们踏上一场关于宇宙的过去、现在和未来的惊奇之旅。不需要图表和方程式，只需凭着奇诡的想象，我们就可走向衰亡的太阳表面，飞越遥远的星系，感受来自黑洞的死亡魅力……你可以轻松读懂时至今日的宇宙神奇，继续探究关于上帝的存在、时间的起源以及人类的未来。',0,0,'2015-10-10 10:00:01',1,4,1,12),(3,'二手时间','S.A. 阿列克谢耶维奇 ','2016-01-01 00:00:00','201604081829099183.jpg','中信出版社\n','2015年度诺贝尔文学奖得主阿列克谢耶维奇最具分量的作品\n发表后荣获德国书业和平奖（2013）、法国美第契散文奖（2013）、俄罗斯「大书奖」读者票选最佳文学作品（2014）、波兰卡普钦斯基报告文学奖（2015）\n本书是白俄罗斯著名作家阿列克谢耶维奇最新作品，通过口述采访的形式，展现身处关键历史时刻的普通人的生活。本书讲述了苏联解体后，1991年到2012年二十年间的痛苦的社会转型中，俄罗斯普通人的生活，为梦想破碎付出的代价。在书中，从学者到清洁工，每个人都在重新寻找生活的意义。他们的真实讲述同时从宏观和微观上呈现出一个重大的时代，一个社会的变动，为这一段影响深远的历史赋予了人性的面孔。苏联解体已逾二十年，俄罗斯人重新发现了世界，世界也重新认识了俄罗斯。新一代已经成长起来，他们的梦想已不再关乎梦想，不再像90年代他们的父辈，关心信仰。二十年来，人们看了崭新的俄罗斯，但她却早已不是任何人曾经梦想过的俄罗斯了。作者追溯了苏联和苏联解体之后的历史过程，让普通的小人物讲述他们自己的故事，从而展现出身处历史的转折，以及人们如何追寻信仰、梦想，如何诉说秘密和恐惧，让人们重新思考什么是“俄罗斯”和“俄罗斯人”，为什么他们无法适应急剧的现代化，为什么再近两百年之后，依然与欧洲相隔。本书分为上下两部分，采访了生长于理想之下的俄罗斯人和今天的俄罗斯人，以及阿塞拜疆等前苏联国家的普通人，呈现他们的生活细节，所感所想。德国媒体盛赞该书撷取的是最为细小的马赛克，却拼出了一幅完整的后苏联时代图景。“一部20世纪后半叶的微观俄国史，笔力直抵普京时代。”',0,0,'2015-10-10 10:00:02',1,7,1,12),(4,'活着','余华','2012-08-01 00:00:00','201604081829104262.jpg','作家出版社','《活着(新版)》讲述了农村人福贵悲惨的人生遭遇。福贵本是个阔少爷，可他嗜赌如命，终于赌光了家业，一贫如洗。他的父亲被他活活气死，母亲则在穷困中患了重病，福贵前去求药，却在途中被国民党抓去当壮丁。经过几番波折回到家里，才知道母亲早已去世，妻子家珍含辛茹苦地养大两个儿女。此后更加悲惨的命运一次又一次降临到福贵身上，他的妻子、儿女和孙子相继死去，最后只剩福贵和一头老牛相依为命，但老人依旧活着，仿佛比往日更加洒脱与坚强。\n《活着(新版)》荣获意大利格林扎纳•卡佛文学奖最高奖项（1998年）、台湾《中国时报》10本好书奖（1994年）、香港“博益”15本好书奖（1994年）、第三届世界华文“冰心文学奖”（2002年），入选香港《亚洲周刊》评选的“20世纪中文小说百年百强”、中国百位批评家和文学编辑评选的“20世纪90年代最有影响的10部作品”。',0,0,'2015-10-10 10:00:03',1,7,1,12),(5,'人类简史','[以色列]尤瓦尔·赫拉利 ','2014-11-01 00:00:00','201604081829114211.jpg','中信出版社','十万年前，地球上至少有六种不同的人\n但今日，世界舞台为什么只剩下了我们自己？\n从只能啃食虎狼吃剩的残骨的猿人，到跃居食物链顶端的智人，\n从雪维洞穴壁上的原始人手印，到阿姆斯壮踩上月球的脚印，\n从认知革命、农业革命，到科学革命、生物科技革命，\n我们如何登上世界舞台成为万物之灵的？\n从公元前1776年的《汉摩拉比法典》，到1776年的美国独立宣言，\n从帝国主义、资本主义，到自由主义、消费主义，\n从兽欲，到物欲，从兽性、人性，到神性，\n我们了解自己吗？我们过得更快乐吗？\n我们究竟希望自己得到什么、变成什么？',0,0,'2015-10-10 10:00:04',1,7,1,12),(6,'撒哈拉的故事','三毛','2011-01-07 00:00:00','201604081829120294.jpg','北京十月文艺出版社','★三毛——华文世界里的传奇女子，她的足迹遍及世界各地\n★此篇是三毛最受欢迎的作品，倾倒了全世界的华文读者\n★封面由台湾著名设计师聂永真倾情设计\n★全方位、多角度、立体化地展现了别样的三毛\n内容简介\n三毛作品中最脍炙人口当属《撒哈拉的故事》，本书由十几篇精彩动人的散文结合而成，其中《沙漠中的饭店》，是三毛适应荒凉单调的沙漠生活后，重新拾笔的第一篇文章，从此之后，三毛便写出一系列以沙漠为背景的故事，倾倒了全世界的华文读者。',0,0,'2015-10-10 10:00:05',1,1,1,12),(7,'沉默的大多数','王小波','1997-10-01 00:00:00','201604081829135123.jpg','中国青年出版社','这本杂文随笔集包括思想文化方面的文章，涉及知识分子的处境及思考，社会道德伦理，文化论争，国学与新儒家，民族主义等问题；包括从日常生活中发掘出来的各种真知灼见，涉及科学与邪道，女权主义等；包括对社会科学研究的评论，涉及性问题，生育问题，同性恋问题，社会研究的伦理问题和方法问题等；包括创作谈和文论，如写作的动机，作者的师承，作者对小说艺术的看法，作者对文体格调的看法，对影视的看法等；包括少量的书评，其中既有对文学经典的评论，也有对当代作家作品的一些看法；最后，还包括一些域外生活的杂感以及对某些社会现象的评点。',0,0,'2015-10-10 10:00:06',1,1,1,12),(8,'皮囊','蔡崇达','2014-12-01 00:00:00','201604081829149285.jpg','天津人民出版社','一部有着小说阅读质感的散文集，也是一本“认心又认人”的书。\n作者蔡崇达，本着对故乡亲人的情感，用一种客观、细致、冷静的方式，讲述了一系列刻在骨肉间故事。一个福建渔业小镇上的风土人情和时代变迁，在这些温情而又残酷的故事中一一体现。用《皮囊》这个具有指向本质意味的书名，来 表达作者对父母、家乡的缅怀，对朋友命运的关切，同时也回答那些我们始终要回答的问题。\n书中收录有《皮囊》《母亲的房子》《残疾》《重症病房里的圣诞节》《我的神明朋友》《张美丽》《阿小和阿小》《天才文展》《厚朴》《海是藏不住的》《愿每个城市都不被阉割》《我们始终要回答的问题》《回家》《火车伊要开往叨位》等14篇作品。\n其中《皮囊》一文中的阿太，一位99岁的老太太，没文化，是个神婆。她却教给作者具有启示力量的生活态度：“肉体是拿来用的，不是拿来伺候的。”\n《母亲的房子》里，母亲想要建一座房子，一座四楼的房子，因为“这附近没有人建到四楼，我们建到了，就真的站起来了”。为了房子，她做苦工，捡菜叶，拒绝所有人的同情，哪怕明知这座房子不久后会被拆毁，只是为了“这一辈子，都有家可归”。\n而《残疾》里的父亲，他离家、归来，他病了，他挣扎着，全力争取尊严，然后失败，退生为孩童，最后离去。父亲被照亮了。被怀着厌弃、爱、不忍和怜惜和挂念，艰难地照亮。就在这个过程中，作者长大成人。自70后起，在文学书写中，父亲形象就失踪了。而蔡崇达的书里，这个形象重新出现了。\n这部特别的“新人新作”，由韩寒监制，上市之初即广受好评。莫言、白岩松、阿来、阎连科等评价为当下写作中的一个惊喜。或许《皮囊》真是新生的＂非虚构＂写作林地里，兀自展现的一片完全与众不同、可读可思、独具样貌的林木。',0,0,'2015-10-10 10:00:07',1,1,1,12),(9,'你今天真好看','[美]莉兹•克里莫 ','2015-08-01 00:00:00','201604081829151634.jpg','雅众文化/天津人民出版社','《你今天真好看》是一本清新暖萌的漫画集，收录了莉兹•克里莫150多张逗趣漫画。书中集结了所有你能想到的各种萌物，恐龙、棕熊、兔子、企鹅，甚至还有伞蜥、獾、土拨鼠、狐獴……在诙谐的对话中，它们展现出一种与生俱来的幽默感和令人艳羡的生活情趣。\n你可能是书中任何一个动物，而书 中的动物可能是你身边的任何一个人。\n谁不曾享受过与父母的温情一刻？\n谁没有被朋友的玩笑弄得一时语塞？\n谁不会因自己反应慢半拍而哭笑不得？\n这本书就是有这样的魔力让你不由自主地会心一笑。',0,0,'2015-10-10 10:00:08',1,6,1,12),(10,'万物：创世','[德]延斯·哈德（Jens Harder）','2015-04-01 00:00:00','201604081829169826.jpg','北京联合出版公司','《万物：创世》是野心勃勃的“漫画宇宙史”三部曲之开篇。\n它以宇宙大爆炸“奇点”为起始，描绘了长达140亿年的宇宙进化图卷，直到人类诞生前夕。本书画风大气，想象力奇诡，集人类史上各种经典文化符号之大成，给自然科学史增添了趣味和深度。\n这部漫画讲述了宇宙万物创生、各种物理定律和生物进化史；同时，也大胆地运用了人类文明各种经典符号、绘画为科学作注脚：从傅科摆到中世纪手绘星图，从古老的玛雅文明符号到《丁丁历险记》漫画，从北斋笔下的浮世绘到波提切利的《维纳斯诞生》。\n所以说它不仅仅是一部以科普为己任的世界进化史，更是一部集人类智识之大成，又挑战人类智识上限的艺术史。',0,0,'2015-10-10 10:00:09',1,6,1,12),(11,'一品芝麻狐','王溥','2016-01-01 00:00:00','201604122038249776.jpeg','中国友谊出版公司','《一品芝麻狐》是韩寒、姚晨、叫兽易小星诚意安利的超萌超温暖治愈的漫画书，新浪微博超火爆的连载漫画作品，为你吹散心中的雾霾。\n在举世瞩目的英雄故事背后，一只想找到一份好工作的呆萌小狐妖，名唤芝麻，外号毛土豆，体态圆润，略较劲，贼善良，一心寻找一位威震八方的好大王，却遇到了享受大保健的话（jian）唠（meng）和尚，从此芝麻狐成为天煞孤孤，克山克洞克大王。在寻找工作机会的路上，芝麻狐碰到了一口东北腔的老姑，曾经拥有一段可歌可泣的爱情故事的老黄，对老姑一见钟情的因食仙草变成熊的樵夫……\n这是一本萌点爆棚的漫画书，这也是一本笑点密集却温暖治愈的漫画书，萌萌哒，暖暖的，几十万微博粉丝疯狂追更，看过的读者都血槽已空。',0,0,'2016-04-12 20:38:24',1,6,1,12),(12,'松风','早稻','2015-07-10 00:00:00','201604122043466328.jpeg','中国水利水电出版社','本书收集了画家早稻从2013年至2015年期间的部分作品，也是早稻的第一本个人作品集。\n本作品以中国古代志怪小说和唐宋传奇为蓝本，讲述了一个在怪诞世界斩妖除魔的故事。\n全书不着一字，仅以作品的序列和章节的节奏完成故事传达，可以说是近年来少见的高完成度的绘画作品集。\n早稻以她自成一派的水墨手法，用令人难以置信的高水准画作，优雅地讲述了一个来自深山的年轻侠客仗剑四方、游历奇境、斩妖除魔、拨尘见佛的历程。',0,0,'2016-04-12 20:43:46',1,6,1,12),(48,'画的秘密','[法]马克-安托万·马修','2016-01-01 00:00:00','201604122056482175.jpeg','北京联合出版公司','挚友爱德华去世了，遗赠给埃米尔一幅画。朋友用智力和情感铸就的画中，每一个细节都是冰山一角，是一个字谜、一个玩笑，一个通往另一片天地的入口……\n画面越深远的地方，微妙的细节就越多，连显微镜也不足以展现其中所有的东西。埃米尔倾尽余生追随画的秘密，将其中的细节复制、放大、临摹、解读。那些在时间流逝中渐渐显现的痕迹，正在悄悄揭开这个令人难以置信且充满诗意的谜底……',2,1,'2016-04-12 20:56:49',1,6,1,12),(49,'岳飞和南宋前期政治与军事研究','王曾瑜','2002-10-01 00:00:00','201604122105538075.jpeg','河南大学','《岳飞和南宋前期政治与军事研究》从科学研究的角度，对岳飞事迹作系统的考证和论述，同时对宋高宗和秦桧的主要事迹作了详细的考证和论述，从而展示南宋前期的政治与军事情况。',0,0,'2016-04-12 21:05:54',1,2,1,12),(50,'The Final Years of Michael Jackson','Ian Halperin','2009-07-01 00:00:00','201604122113354570.jpeg','SIMON','揭秘: 迈克尔 杰克逊的最后几年',0,0,'2016-04-12 21:13:35',1,3,1,12),(51,'科技頑童沃茲尼克','沃茲尼克 史密斯','2007-07-27 00:00:00','201604130856323706.jpeg','遠流出版事業股份有限公司','【96年8月誠品選書】沃茲尼克口述自己是在什麼樣的成長背景與環境下展開發明之路，又是如何透過他的設計力量，帶動全球個人電腦普及應用的浪潮。書中談到他從小跟一群同好研發電子器材的故事、加入電腦俱樂部、把賺到的錢拿來辦音樂會、一次差點喪命的墜機意外、教小學五年級生的十年經驗，也澄清了外界對他的諸多揣測，說明他決定賣掉股權回家鄉教書，在於其「關懷」的人生觀。本書談到有關發明的興奮、讓世界更美好的過程，以及純粹的創業家精神，揭露了許多任何聽過、摸過、用過蘋果電腦的人都會感興趣的人物與故事。',1,0,'2016-04-13 08:56:32',1,4,1,12),(52,'芝麻糊','zcp','2015-04-16 00:00:00','201604161451356448.jpeg','啊啊啊出版社','卡卡地方卢卡斯的肌肤',0,0,'2016-04-16 14:51:35',1,6,1,12);
/*!40000 ALTER TABLE `T_BOOK` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_BOOKPOST`
--

DROP TABLE IF EXISTS `T_BOOKPOST`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_BOOKPOST` (
  `pk_bookpost_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '图书帖表编号',
  `bookpost_title` varchar(60) COLLATE utf8_unicode_ci NOT NULL COMMENT '帖子标题',
  `bookpost_content` longtext COLLATE utf8_unicode_ci COMMENT '帖子内容',
  `bookpost_book_name` varchar(60) COLLATE utf8_unicode_ci NOT NULL COMMENT '帖子关联图书',
  `bookpost_reply_number` int(11) NOT NULL DEFAULT '0' COMMENT '帖子回复人数',
  `bookpost_collect_number` int(11) NOT NULL DEFAULT '0' COMMENT '收藏帖子人数',
  `bookpost_support` int(11) NOT NULL DEFAULT '0' COMMENT '帖子点赞量',
  `bookpost_time` datetime NOT NULL COMMENT '发帖时间',
  `bookpost_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `fk_bp_user_id` int(11) NOT NULL COMMENT '发帖人',
  `fk_bp_field_id` int(11) NOT NULL COMMENT '帖子所属领域',
  PRIMARY KEY (`pk_bookpost_id`),
  KEY `fk_T_BOOKPOSTS_T_USER1_idx` (`fk_bp_user_id`),
  KEY `fk_T_BOOKPOSTS_T_FIELD1_idx` (`fk_bp_field_id`),
  CONSTRAINT `fk_T_BOOKPOSTS_T_FIELD1` FOREIGN KEY (`fk_bp_field_id`) REFERENCES `T_FIELD` (`pk_field_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_BOOKPOSTS_T_USER1` FOREIGN KEY (`fk_bp_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=17 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_BOOKPOST`
--

LOCK TABLES `T_BOOKPOST` WRITE;
/*!40000 ALTER TABLE `T_BOOKPOST` DISABLE KEYS */;
INSERT INTO `T_BOOKPOST` VALUES (1,'《第二类死亡》请珍爱身边的人','读完《第二类死亡》，令人战栗，被所爱的人遗忘和遗忘所爱的人，哪个更痛苦呢？\n我们总是不太珍惜家人，总以为有很多时间可以陪伴。咱一起时又常常玩手机，做自己的事，而忽略了坐在我们身边的人。\n最近我突然对家人倍感愧疚。在某个深夜失眠以至于急切地想要见到家人。','第二类死亡',2,1,1,'2016-04-15 11:00:00',1,1,5),(2,'《三体》真的很棒。','最近看完了三体，感觉就是荒谬中的科学。很佩服刘慈欣啊。\n这本书真的不错，不愧是雨果奖，推荐给大家。\n弱小和无知不是生存障碍，傲慢才是。——《三体》','三体',0,0,0,'2015-10-11 11:00:01',1,2,4),(3,'《水浒传》好在哪里？','是说《水浒传》的原著好在哪里？哪些架子支撑它位列四大名著。看过原著和改变的电视剧，其中确有许多精彩故事，但总是觉得不如《三国演义》酣畅淋漓。','水浒传',2,0,0,'2015-10-11 11:00:02',1,1,10),(4,'哈利波特是真的还是假的？','我女儿问我 哈利波特是真的还是假的。我该怎么告诉她？','哈利波特',0,0,0,'2015-10-11 11:00:03',1,2,4),(5,'对《十年往事涌至心头》的一些评价','选第一人称开头，不错，接着就陷入俗套，叛逆少女喜欢玩摇滚的什么的，仿佛穿越到上个世纪去了，但是，越往后越有意思，文字容量比较大，简直是女版《麦田里的守望者》，阅读体验爽快，只是女主角的确太没常识了，爱作，不爱惜自己的身体，让人可怜不起来，而她的确是不需要怜悯的人。有个性，好。男主角所谓的人品好，呵呵。只能说，这部作品适合初高中学生读读，毕竟他们热闹的青春年华正当时。','十年往事涌至心头',0,0,0,'2015-10-11 11:00:04',1,3,9),(6,'看了《嘿，三十岁》有很多感触','大多数女人到三十岁这个坎，总会有意无意地感慨：女人三十豆腐渣——而男人们活成了一朵向阳花。我相信艾明雅骨子里并非一个女权主义者，也并非只是借助这本书简单地熬上一锅鸡汤。作为社会人存在的女性，其实早就应该承担和释放对自己的那份关爱。所谓的三十岁的坎儿和烦恼在我看来完全是基于此类女性仍然在受到小农经济为基础的传统观念（甚至可以说是余孽）的毒害。当然，现实或许也可以称得上残酷或者无奈，但若不去为自己努力争取自己所向往的空间，那么在某种意义上就真的只能成为雄性动物传宗接代的活体器具了。','嘿，三十岁',0,0,0,'2015-10-11 11:00:05',1,7,4),(7,'宇宙不言，下自成蹊','想象你正搭载着机器猫的时光机，与无数星辰擦身而过，渐渐湮灭的小天体如钻石般闪耀，倾诉着黑洞的存在。而两个黑洞撞击在了一起，就像在橡胶膜上高速运动的铁球压出痕迹，巨大的能量造成时空扭曲，也震荡到你身边。这不是科幻小说，作为时间旅行者，你有幸见证了时下最炙手可热的“引力波”。\n\n上述文字是我对法国理论物理学博士、斯蒂芬·霍金的亲传弟子克里斯托弗·加尔法德的一次效颦。他的《极简宇宙史》带我们参与的时间旅行要比这丰富得多。自古以来，对星空的向往吸引着无数天文爱好者，然而理论物理学的艰涩难懂又令人望而却步。在加尔法德眼里，并不存在这样的门槛，与其鏖战在公式和作图中，不如身临其境去感受。放松心情跟上加尔法德的脚步，只需一点想象力，量子场、白矮星、黑洞，包括日夜相伴却知之甚少的日月，都触手可及。物理学不就是一门充满想象的科学吗？\n\n加尔法德擅用形象的譬喻，宇宙中的天体与生活中随处可见的物品联系起来，简直可亲可爱。太阳之于银河系就如从三百箱铺在广场的沙粒中寻出一颗；沿轨道高速运转的S2就像碗里的玻璃珠寻找恰好平衡的速度，过快会飞出，过慢会落下；电磁场好比冰箱贴靠近冰箱的瞬间，若是变成微缩的小人，绝对能感受到强大的磁场；如果用致密的白矮星做成一个棒球，要重达200吨……无垠宇宙中的距离和时间虽然是天文数字，可一旦明白了其中的奥妙，把它们视为熟悉之物，有没有路便不重要了，一切都在我们脑海里。\n\n《极简宇宙史》的主人公——那个加尔法德设想中的读者，沉迷于宇宙之旅，身边人都觉得他疯狂。不过纵观人们对宇宙认识的历史，突破性的进步正是来源于一个个疯狂的念头：太阳系不是宇宙中心，地球不是太阳系中心，我们足下的地球是圆的，还有爱因斯坦的理论未被证实之前也颇多争议，以及颠覆想象的多重宇宙、弦理论。理论物理不断发展，技术的进步提供了更多昔日无法证明的实验条件。谁又能断言今天我们深信不疑的观点不会在明日被推翻、被更迭？谁又知道下一个惊人的突破不是诞生于某个普通人疯狂的臆想中？被嘲笑的想象也可能在某天、某个角落石破天惊。加尔法德为我们指了一条路，带着基本的概念走近宇宙，其后却不做过多评判但凭读者诉说：大美无言，无尽的想象是每个人独有的星空。\n\n如是观之，不难理解梵高创作的《星空》为何如此受到追捧，怪诞却旖旎的想象赋予了广阔天际无穷的可能。梵高感慨：“要是我笔下的人物看起来很美，那我倒要绝望了；我才不想让他们看起来仅仅达到学术上的正确。”爱因斯坦的话则更精辟也更显悖谬：“如果你们理解了我所要告诉你们的事情，那么显然我没有讲清楚。”科学和艺术的本质在天才眼中如出一辙。\n\n发现引力波的新闻甫出，坊间流传辽宁一下岗工人在5年前作出过预言。虽被专家辟谣——所谓预言本是爱因斯坦60年前的贡献，此人只是科普作品发烧友——民间爱好者对宇宙的极度痴迷却令人动容。物理学家都是疯狂的人，加尔法德说，以他们的绝顶聪明理应能靠经商谋得财富，偏偏迷恋探索宇宙的乐趣。从加尔法德的字里行间，倒也不难理解，宇宙之美实在太迷人。看看电影《万物理论》中，霍金的扮演者陷入思索时的如痴如醉，时间和空间都无法束缚思想，正如那难以企及的宇宙之旅不止于加尔法德笔下的疯狂，而是刚刚打开我们的探索之门。\n\n宇宙不言，下自成蹊。','极简宇宙史',0,0,0,'2015-10-11 11:00:06',1,7,4),(8,'把自己的生活拖入深渊，何尝不是一种自私','我有个邻居的妻子，是外地打工时认识的，我们叫她文阿姨。\n\n小孩子们一开始都特别喜欢文阿姨，当大院所有女人都说方言时，就她说普通话。当大院大部分女人日日操劳而不顾形象时，她整日穿着长及小腿的裙子，踩着高跟靴，化着淡妆，哼着歌做家务。当大院大部分女人，被时光磨的脾气很坏，歇斯底里骂孩子骂男人骂老人时，只有她，永远温言细语。无论多小的孩子，到她家，都有糖果或蜜饯招待。\n\n然而即使小孩子们很喜欢她，她在我的家乡，仍然没有一个朋友。男人们怎么想不知道，我们长期跟妈妈混，女人的想法，我们一清二楚。\n\n她们说起她，从来没有好话。\n\n“打扮的像个妖精，怎么没嫁到城里？扭来扭去不知道扭给谁看。”\n\n“就没见过那么懒的女人，睡到八九点不起床，让男人起来做早饭给她吃。”\n\n说起她的男人，她们更没有好话了。\n\n“见过惯老婆的，没见过惯成那样的。白天在外面干活累得要死，回来还要伺候她。”\n\n“他就是怕老婆，老婆哼一声，天都塌了。”\n\n难听话可不止这些。我们年龄小，还不算懂事，虽然内心深处都很喜欢文阿姨，却因为大人的态度，都拿有色眼镜看她，认为她不是贤惠的好女人。\n\n等长大以后才发现，不，不是的。整个大院，也就只有她，是唯一正常的女人。\n\n就拿我妈举例。\n\n如果家人在我妈心中排个序，一定是孩子第一，男人第二，家里养的鸡鸭猪狗第三，她排最后。那些年，为补贴家用，她也外出做工，中午尽管只有一两个小时时间休息，她也要跑步回家给我们做饭。\n\n有一天，她上班途中，突然觉得腹痛难忍，去卫生间发现下身在出血，而且血量很大，她以为推迟了好几个月的月经突然来临，痛经太过严重，就赶紧请假回家。回家之后，腹痛让她坐都坐不住，只能躺着。按说这时候，她应该去医院检查的，可她并没有，她想到我们还有一个小时放学，就一直忍着。躺了一会儿，还起来给我们做了一顿饭。饭做好之后，她晕倒在厨房里。邻居路过，看见了，连忙叫醒她，把她送到医院。\n\n医生说，她小产了，大出血，晚来五分钟就没命了。\n\n她这才知道，她已经怀孕好几个月了。而论起小产的原因，是因为太过于操劳。\n\n我长大以后，听说这件事，忍不住大哭。多么可怕，在我上小学的某一天，我妈差点就没命了。而导致这一切的原因，除了她日常的操劳，还有她认为的，我们非吃不可的一顿饭。\n\n我无法想象，小产有多痛。也无法想象，她是怎样看着下身血流不止，忍耐那几个小时的。\n\n我骂她：“我们就算一顿饭不吃又怎么了？能比你身体重要？爸爸不也在上班吗？托人告诉他，让他回来做饭不行吗？就算真不行，跟邻居说一下，我放学回来到他家里吃一顿不可以吗？你非得做那一顿饭？”\n\n她半天没说话，突然说：“因为我是妈妈呀！”\n\n我的眼泪再次掉下来。\n\n我不知道这世上有多少妈妈，母性像她一样足，永远把家人的需求放在自己之上，忍天下之大难忍，受尽委屈却并不觉得辛苦。就算因此把自己弄到几乎没命，却也认为这是妈妈应该做的。\n\n我的妈妈，从我记事起，就一直蓬头垢面，想来就是太过于操劳而没有时间收拾自己的缘故。而邻居文阿姨，漂亮了一辈子，到老，依然漂亮。\n\n小时候，我受大人的影响，不喜欢文阿姨的作风，长大后，再对比我妈妈，恨不得她就像文阿姨一样生活。\n\n我跟妈妈说：“我们都长大了，你要照顾好自己，多学学文阿姨，把自己打扮的漂漂亮亮的。”\n\n我妈从鼻子里发出一声“哼”，说：“我才不学她，自私了一辈子。”\n\n可是亲爱的妈妈，跟文阿姨更爱自己的自私相比，你的行为只怕是更大的自私吧！你把所有的时间、精力和爱都奉献给了我们，不留一点给自己，差点把自己弄到没命，就没想过，如果你真有什么事情，我们怎么办？\n\n如果那天，不是邻居刚好赶到，把你送到医院，我可能在上小学时，就没了妈妈，成为一个孤儿。如果真到了那一天，就算你对我，有天大的爱，一旦我成了孤儿，又到哪里去得到母爱呢？\n\n真爱一个人，难道不应该是为了他照顾好自己，不让他操心，给他细水长流而不是一次倾尽所有，后续可能乏力的爱吗？\n\n我这些天，看了一本书，书名叫《可爱的诅咒》，讲圣母型人格障碍的。我学心理咨询已有六年，当然早就察觉我妈妈就是典型的“圣母”，这些年，我不停用言语或行动，试图纠正她只为别人，不顾自己的圣母行为。我自认，稍有效果，但老实讲，圣母病也是癌，想要根治，并非一朝一夕。除非能让她们从内心深处认定自己的行为是错的，否则，根本治愈不了。\n\n而“圣母们”，最大的问题是，她们从来不认为自己是错的。在她们的潜意识里，她们坚信，只有不停付出，自己的需求降到最小，忙成一个陀螺，才算对得起身边的人，才能过得了自己的心。\n\n这世上，只有很少一部分圣母，会自发的认为自己的行为是错误的，大部分人只认为像文阿姨那样更爱自己的女人，才是最大的自私，还试图用舆论去纠正文阿姨们。这多么悲哀！\n\n最可怕的是，圣母病还会遗传，母亲传给女儿，外婆传给外孙女。代代相传，无穷尽也。\n\n我只希望，身边有亲人或自己得圣母病的，本着爱的目的，都能来看一看《可爱的诅咒》这本书，从观念里得到治愈，真正拥有爱自己的权利。','可爱的诅咒',0,0,0,'2015-10-11 11:00:07',1,4,5),(9,'我这么好，你爱来不来','看这本书时，我正处于焦头烂额中，开年的工作千头万绪，自己的新家又在装修，好几篇约稿都在截稿日，随时准备各种出差和突发状况，那时自己的神经处于高度紧绷的状态，脾气也不好，一点就着，抽出时间看这本书，最大的感受就是，人活在这个世界上，实在太不容易了。\n\n我们看过许多书，明白许多道理，但依然没办法顺意地过自己的人生，各种各样的问题层出不穷，我们渴望寻求解决的办法和攻略，期待能够有一本书或者一个人指引自己走出各种困顿，但很遗憾这世界上压根没有一劳永逸的办法。\n\n这绝对是大实话，就好比我写作，我写了那么多正能量的话，几乎每天都在微博说感情说工作说生活，但我和所有人都一样，绝不是时时刻刻都积极向上阳光，反而我内心中其实是一个悲观主义者，我不相信这个世界上的很多绝对道理，尤其是关于以物换物的努力成功原则，但我写下那样的话，鼓励别人，同样也是开导自己。\n\n我始终认为，一个人可怕的不是你想要得到什么，而是你在得到的过程中不出付出代价，我们总是羡慕别人光鲜亮丽的生活，但却忽略了他人是用什么代价换来的，我们只想要得到那个成功的结局，却没有想过是否愿意付出同样的努力和代价，坦白讲，这就是许多人无法成功郁郁寡欢的原因。\n\n正能量的话里最常说的是什么，爱人先学会爱自己，努力就会成功，明天会更好。但都是结果论，方法论的问题不在鸡汤的范畴之内，于是被许多人诟病，在这本书里，却有着类似于自救的方式方法，并且有效果，其实从根本上讲，道理人人都明白，爱自己就是吃点好的，努力就是每天用心工作，明天会更好是社会自然发展规律，这些我们都知道，但这还远远不够。\n\n很多时候，不是我们自己本身的问题难以解决，而是不知道该如何下手。\n\n心理自救的书籍很多，但这本书却属于通俗易懂的那类，不生涩不刻意，反倒有许多小乐趣在其中，我自认是一个内心强大的人，但也一次次被书中看似寥寥数语简单的话语的击中，每个人都会从书中看到许多技巧，但要因人而异地进行分析和使用，只有在内心受到触动的时候，首先有了共鸣，才能够有所收获。\n\n所以，共鸣点是我看这本书的第一感受，我相信许多读者的感觉也是类似，因为书的切入点实在聪明，圣母型的可爱诅咒，只要稍微一解释，就会不由自主往自己的身上套，因为活着本身就是为了满足自己和他人，而一旦有过为他人期待而活的经历，就会对号入座。\n\n在有了强烈共鸣之后，就会想到解决的方法论，让自己主动去研读这本书，书中给了许多解决办法和途径，有的画图，有的走心，有的列表，每一个方法都带有作者主观的意味，也不能适合于所有人，但正是因为保罗的范围实在太广，才不会觉得这本书无用，总能在其中找到一两个适合自己的办法去尝试。\n\n而一个非常关键的问题，就是书中提到了其他同类书里没有重点强调的问题，它被单独引出来提醒读者注意，就是这个世界是不愿意接受主动改变的。\n\n往深里思索，这个世界的所有改变，小到自我认知变化对于旁人的反应，大到国家和政权的更迭，无不是要付出超出想象的代价，自我的改变或许会遭到身边人的反对，比如换专业父母不赞同，跳槽有人不赞同，哪怕谈个恋爱都会有各种的意见左右自己，而世界的其他改变都会有战争甚至是生命付出的代价，改变，本身不是这个世界的寻常动作。\n\n所以，在改变到来时，对于我们个人而言，本身就许多有绝对强大的心理素质，首先你要笃定自己的改变是正确的，并且愿意为此付出努力，还要扛得住周遭的有色眼光和各种的意见甚至是刁难，太多人在这其中选择半途而废，而最后剩下的，也不一定被所有人接受和承认。\n\n故而，改变本身就是一件困难的事情，而这本书会告诉你，在改变不适或者遇到困境时该怎么办，在自己倍感压力时又该怎么办等等，改变不是一朝一夕就能完成的事情，绝大多数时候，我们都需要从一点一滴做起，并且循序渐进，最终达到理想的效果。\n\n很明显，我们都或多或少中了可爱的诅咒，是一个生活在期待中的人，这份期待来源于自己，渴望成为如何的人，也来源于父母、家人、同事和其他人，我们会在这条路上渐行渐远，自我的期待会越来越小，旁人的期待会变成支配自己生活的“动力”，我们开始被淹没在社会的洪流中被推着走，很多时候就是源于这份期待。\n\n人越长大，就越会陷入这股漩涡里，这时自我的解救就显得格外有必要，我们都知道要好好爱自己，纸上谈兵说得容易，可做到却十分难，总会有人跳出来说你不可以这样那样，稍微为了自己一点就会被冠以自私，我们惧怕被拒绝，惧怕流言蜚语，惧怕各种和自己不一样的意见，为了显得合群，为了有好的人缘，我们将自我的原则甚至底线一次次拉低，这个时候，又是谁的责任呢？\n\n爱自己和做自己，不是为了满足别人的期待，或者取得成功，我记得蔡康永老师说得好，做自己是为了有说不的权利，是拒绝别人后依然受到尊重。一个完全独立的人，是不仅拥有独立的生活空间和经济能力，更是要有独立的人格。\n\n曾经有一句关于爱情的话很流行，叫做：我这么好，你怎么还不来。这句话源于只要自己足够好久就会遇到那个对的人。但细想一下，这其实也是为了满足别人期待而自己前行的典型例子。自己足够好了，别人就会喜欢，别人就会爱上你。但这真的就是一个因果关系么？\n\n在我看来，我们做任何事情，都不是为了取得别人的认同和赞美，不是为了得到更好的薪资和更加好的生活，虽然那会让在你更有信心，但却不是最终我们为之奋斗的目标。我可以努力工作，用心生活，我可以在自己喜欢的前提下做超乎自己能力的事情，勇于尝试，并且善于总结，不是为了别人，而是源于自己的渴望。\n\n同样，我不如别人期待的那般努力，喜欢安逸的生活，喜欢偶尔偷个懒，不想循规蹈矩，热爱不安定的生活，喜欢随时都走在路上，也不是为了别人的期待，也是源于自己的渴望。\n\n我可以变得更好，或者我觉得现在就挺好。我要的不是别人的认同。我这么好，你怎么还不来？这是一句屁话。\n\n于我而言，我这么好，你爱来不来。','可爱的诅咒',0,0,0,'2015-10-11 11:00:08',1,2,5),(10,'一个思考商业的大框架','该书很浅显地讲了企业管理、团队建设、职业规划这三个方面，确实让没有管理学基础的读者也能很顺畅地就能读完，这归功于译者的功底。我虽然未读过他的10年前的经典之作《赢》，但从目录上比较便可料到这本书可能是对《赢》的高度提炼，没有多少新的内容，若按书名对号入座，这一点当然是减分了，如果真想找这本书来探寻商业的本质是什么，大概要失望了。这本书更多是在平淡中讲述一些不会随时间或场景而变的商业经验之道，如：一个企业的协同力究竟要协同什么，作者给出的答案是让使命、行动与结果协同起来；如何判断一个公司是否健康发展，有三个关键指标会对你十分有益：员工敬业度、客户满意度和现金流。\n这本书只有16万字，却涉及了商业诸多方面，因此不可能深入地谈商业的细节，只能是泛泛而谈点到为止，如：“关于财务，我的主要兴趣是差异分析”，对于公司财务状况的把控，企业管理者现在做的最多的当然是寻找差异，而现实中用的更多的财务技巧不可能在这里找的到。这不是一本讲究细节与垂直方向的书籍，也没有类似《必然》作者凯文·凯利所提出的创新观点。你若把这些放之四海而皆准的“管理真理”看成一种商业的本质，那倒未尝不可，毕竟书中一些观点和方法在现如今确有值得借鉴的地方。\n\n最后说一下该书带来的启迪。阅读该书给我带来更多触动的是作者对个人职业如何度过的观点，漫长的职业生涯，我们都会面对求职、停滞、离职等困惑，如果只想做自己喜欢做的事，有可能面临巨大的经济压力，因为你喜欢做的事情不一定是你擅长的事情；而有的人从事一份体面工作却不是自己真正喜欢的，因此没有了希望和热情。处理这个职业困惑的办法当然是找到“命运之域”，即找到自己非常擅长又非常喜欢的职业或企业，这可能需要十年或更长的时间来过渡，毕竟还是要考虑到经济问题。\n希望追求自我实现的人都能找到自己的“命运之域”，职业中的我们以书中的一段话共勉：\n你还不够强大。\n这里的强大，不是指性格方面。\n对，宽度和深度。','商业的本质',0,0,0,'2015-10-11 11:00:09',1,3,8),(11,'都说在风口上猪都可以飞，但是风小了以后怎么办呢','之前有段时间，媒体上总是说风口处猪都可以飞，无疑是对互联网时代那种瞬间造星能力最形象的表述。我对这种说法一直都有所保留。因为再大的风都会减弱，而且减弱的速度非常快。当风减弱后，那些因风口飞起的猪们该怎么办？直接摔落吗？其实，有的时候，对于没有准备好的公司和个人，来得太快的风口，反而可能导致他们在瞬间的看似繁荣中死亡。商业是一个长久的事业，拼的是时间和耐力。活得越久的公司才可以沉淀出自己的文化和品牌，才能真正地在这瞬息万变的商业社会中占有一席之地。杰克·韦尔奇深谙公司如何保持长期增长的方法，他在《商业的本质》中有非常通俗和精辟的表述。','商业的本质',1,0,0,'2016-03-24 17:22:23',1,5,8),(12,'我是只想被多爱一点的小恐龙~','本意是去图书馆学习，却不慎走入了漫画区。就发现了这本暖萌暖萌的小动物漫画集~\n\n「暖心」\n“怎么啦”“要下雨了我却没带伞”\n——“别担心，我罩着你。”\n哈—哈—哈—哈——','你今天真好看',0,0,0,'2016-04-11 18:18:10',1,3,6),(13,'莫言获奖了，我却想说说余华','是的，这篇文章是想说说余华，说说他的活着。用一下午的时间，一口气读完了余华的活着，好的文学作品就是有这样的一种魔力，让读者不忍放下的魔力。《活着》讲述了福贵的一生，富家少爷福贵嗜赌成性，最后赌光了家产。贫困之中，因为母亲生病，在福贵为母亲求医的路上，又被国民党抓去当壮丁，后来被解放军俘虏，放他回了家。结果回到家中，母亲已因病逝，妻子家珍独自将一双儿女拉扯大，女儿在一次意外中变成了哑巴，儿子尚且活泼机灵。本以为这次大难不死是必有后福，但是悲惨的人生却才刚开始上演。用余华自己的话说，《活着》讲述了一个人和他自己生命的友情，讲述了人如何承受巨大的苦难，讲述了眼泪的宽广和丰富，讲述了绝望的不存在，讲述了人是为活着本身而活着，而不是为活着之外的事物。。。。。。\n\n这就牵扯出了我为什么要为大家推荐这本书，在这个畅销书榜上满是速食文化的年代，在这个国民缺乏信仰的年代，在这个价值观扭曲的年代，我们应该静下心来想一想，我们到底是为了什么而活着。不为别的，为活着本身而活着。故事中的主人公与她多舛的生命是一种友情的关系，那种相互感激而又相互仇恨，他们谁都无法抛弃对方，而谁也没有理由抱怨对方。这是小说所要传达给读者的主旨，当我们将生命与自己的关系看成是一种友情的关系时，生命突然变得轻盈了。再也无须对自己的不完美而挑剔，不再为生命的不如意而抱怨，因为友情让我们抱着更开放的态度去接纳一切不完美而不是与之抗衡。\n\n小说用十分极端的笔触，描写了福贵艰难困苦的一生，很多人包括我自己都会觉得这样的描写太极端太悲惨。当然，小说本身就不是为了描述现实，而是在现实与想象中找到交集，从而来反映生活。太接近现实反而会发现太多的丑恶和阴险，所以才有言：“人类无法忍受太多的真实”。恰恰是这种源于现实而又高于现实的作品，让我们更能深刻并且宏观的品味生命。福贵的对苦难的承受力，以及他乐观的生活态度，会给读者心灵上重重的一拳，至少对于我是这样，更加感恩和接纳生活，感恩生活中所拥有的一切平静与幸福，接纳生活给予的不足与苦难。我们是需要这种能给我们传递高尚的价值观的作品，一种对事物理解之后的超然，对善与恶一视同仁，用同情的目光看待世界的态度。\n\n最后要说一点，其实我是不经常看小说的，因为和很多人一样，我也是抱着一种急功近利的心态在阅读。希望能看见一句话能总结出天地乾坤，而不是用一本书的厚度，诠释一段路的道理。太过于深厚的东西总是很难在这个年代畅行。但是有时候我们就是需要这样一种方式来加深我们理解的深度，而不是只停留在表层理解的浅薄。小说就是有这样一种功能，她会磨灭掉所有不同的界限，会让一个人从他人的经历中感受到自己的命运，就像从镜中窥见自己，从而加深读者对自己经历的感受。这样的神奇，值得我们放下快餐文化的心态，静静的欣赏理解一步作品。就像友人曾经对推荐书的时候对我说过，现在的畅销书多是急功近利的快餐文化，需要这些一些文化功底深厚的书。《活着》就是这样的一步作品。','活着',0,0,0,'2016-04-09 20:57:03',1,2,7),(14,'命中注定终需有，命中没有莫强求','Content','活着',0,0,0,'2016-04-13 10:33:56',1,1,2),(15,'笑傲江湖好看吗','没看过笑傲江湖','笑傲江湖',1,1,1,'2016-04-16 14:17:01',1,1,9),(16,'令狐冲厉不厉害','请问一下？','笑傲江湖',1,1,1,'2016-04-16 14:41:25',1,1,9);
/*!40000 ALTER TABLE `T_BOOKPOST` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_BOOKPOST_COMMENT`
--

DROP TABLE IF EXISTS `T_BOOKPOST_COMMENT`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_BOOKPOST_COMMENT` (
  `pk_bookpost_comment_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '图书贴评论表编号',
  `comment_content` longtext COLLATE utf8_unicode_ci COMMENT '评论内容',
  `comment_reply_number` int(11) NOT NULL DEFAULT '0' COMMENT '评论回复人数',
  `comment_support` int(11) NOT NULL DEFAULT '0' COMMENT '评论点赞量',
  `comment_time` datetime NOT NULL COMMENT '评论时间',
  `comment_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `fk_bpc_user_id` int(11) NOT NULL COMMENT '评论人',
  `fk_bpc_bp_id` int(11) NOT NULL COMMENT '评论帖子编号',
  PRIMARY KEY (`pk_bookpost_comment_id`),
  KEY `fk_T_BOOKPOST_COMMENT_T_USER1_idx` (`fk_bpc_user_id`),
  KEY `fk_T_BOOKPOST_COMMENT_T_BOOKPOSTS1_idx` (`fk_bpc_bp_id`),
  CONSTRAINT `fk_T_BOOKPOST_COMMENT_T_BOOKPOSTS1` FOREIGN KEY (`fk_bpc_bp_id`) REFERENCES `T_BOOKPOST` (`pk_bookpost_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_BOOKPOST_COMMENT_T_USER1` FOREIGN KEY (`fk_bpc_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_BOOKPOST_COMMENT`
--

LOCK TABLES `T_BOOKPOST_COMMENT` WRITE;
/*!40000 ALTER TABLE `T_BOOKPOST_COMMENT` DISABLE KEYS */;
INSERT INTO `T_BOOKPOST_COMMENT` VALUES (1,'水浒是我人生中读的第一部小说，它对我的影响是一生的。但说实话，小孩子还是去看电视剧版的好。因为原著实在少儿不宜，无论是其中的淫秽与血腥场面，还是全书的精神，都远远超出了小孩子的理解能力。儿童尚未形成完善的价值观，他们往往会想当然地认为主角就是“好人”，而当主角做出“好人”所不会做的事的时候，他们要么会不假思索地认为这也是好事，要么就会觉得这是一本坏书。\n很多人把水浒当做武侠小说看，认为这本书说的就是一百零八个大侠如何惩恶扬善行侠仗义的故事。持这种想法看水浒的人大部分都会失望，因为全书都是在杀人放火欺负老百姓，就连那些“大侠”也不例外。尤其是领头的那个宋江，身为江湖领袖，不英俊潇洒气度不凡也就罢了，怎么能如此阴险猥琐！这真是一本坏书。\n觉得水浒差的，大抵就是这两种人：小孩子和被电视剧误导的大人。\n抱着这样的观点来读，未免忒轻看了水浒的深度。\n水浒讲的从来不是什么惩恶扬善，替天行道，更不是所谓忠义两全，浩气长存。全书说淫说盗，说快意恩仇，归根结底说了四个字：逼上梁山。\n水浒是一本属于成人的黑暗故事。\n世界上最好的黑帮小说是哪一本？教父？那是第二。\n世界上最好的黑帮小说非水浒莫属。\n教父只告诉你西西里的故事，而水浒里的故事，地球上的每个角落，每一天都在发生。\n绝望的故事。\n水浒世界里只有一种颜色，那就是黑色。不仅江湖是黑的，寻常巷陌，清修之所，就连庙堂之上也全是黑的。黑道是黑的，白道比黑道更黑。那是血干涸的颜色。水浒的每个字都带着血的沉重，它撕下了现实最后一块遮羞布，把一副地狱图赤裸裸血淋淋地展现在读者面前。\n我一直认为，真正的地狱，是人为了活下去，不得不变成鬼。\n水浒中的人间，就是这样的地狱。没有轮回，没有解脱，永远出不去的地狱。\n悲惨世界里的冉阿让好歹有他的上帝，而水浒中的好汉们，没有救赎，只有手里的刀。水浒更加一针见血，不留余地地指出了这世界的残酷，从而更加真实地展示出了生活在这残酷世界中人的选择。\n\n林冲是第一个展现出全书精神的人物。他做事低调，事事让人，从不惹是生非，是个标准的普通良民。他拥有不高也不低的职位，美丽而恩爱的妻子，高超的武艺，还有几个知心好友。我们理想中平凡而幸福的生活不正是如此吗？然而作者告诉我们：你不找事，事也会来找你。官二代高衙内闯进了普通良民林冲的生活，于是这一切美好的东西都被撕碎了。大好的前途没了，幸福的婚姻没了，最好的朋友背叛了他。就因为一个官二代看上了他妻子，一夜之间，他几十年奋斗得来的东西全都没有了。\n即使如此，他还是忍耐。甚至当两个公人差点暗杀了他，他还是劝鲁智深不要杀了他们。因为林冲还相信，靠勤勉和本分，自己有朝一日还能挣回所有的一切。就算鲁智深再三劝他干脆落草，他还是想做个清清白白的正经人。直到草料场那一夜的忍无可忍。\n没有人天生想做坏人，怎奈这个世界里只能有两种人：坏人，和死人。\n那就他娘的做个坏人吧！\n林冲终于被逼上梁山。在那里等着他的是最后一道试炼：投名状。\n你要做坏人？杀个无辜先。林冲蹲在山下等了几天，想动手，又没机会。敢情当个坏人也这么难。真的难吗？还是你骨子里不够坏？\n等到期限最后一天，等来了杨志。长得这么凶，就你吧。\n杨志其实就是另一个林冲。做坏人第一个要杀的不是别人，正是还有良知的自己。纳了这投名状，从前那个一心想做正经人的自己也就彻底死去了，从此之后，世上少了一个良民，多了一个魔头。\n看着杨志下山远去，林冲想必感慨良多：\n早晚有一天，你也会来到这水泊梁山的。早晚。\n\n普通人如此，英雄也逃不掉。\n武松是小说前半段最光彩照人的形象没有之一。但很多人只看到他的武勇，他的机智，却忽视了他所遭受的人间惨剧。\n水浒里有各种各样的兄弟，有何涛和何清那种为了钱可以翻脸不认人的，有李达和李逵那种弟弟刚到家哥哥就去报案的，也有武大和武二这种兄弟情深的。\n武家兄弟俩从小父母双亡，是哥哥武大郎一手把弟弟武松拉扯到大。我们完全可以想象得到，这苦命的两兄弟从小到大都经历了什么。武大郎矮小丑陋的身体难道是天生的吗？一奶同胞的弟弟武松为什么反而如此高大呢？把这些信息拼凑起来得出的结论，几乎可以解释武松所有的行为。\n武大郎含辛茹苦将弟弟养得又高又壮，自己却因为营养不良加上过度劳累成了个人人嘲笑的半残。而武松也是个有良心知感恩的弟弟，哥哥的所有付出他都看在眼里，因此武松在家的时候从来没有人敢欺负武大。二人虽是兄弟，情义胜却父子。\n这两兄弟的感情，是一个潘金莲可以撼动的吗？\n武松那么反感诱惑自己的潘金莲真的是因为他也喜欢潘金莲吗？武松说：“我武松不是这等没人伦的猪狗！”有人说这是封建礼教，是大男子主义。说这话的人有没有想过：如果谁有个从小把自己一把屎一把尿拉扯大，对自己百般照顾无微不至，甚至饱经风霜却不说苦不说累的哥哥，他还做出对不起哥哥的事，那这个人不就是猪狗不如吗？有点良心的人谁会这么做？\n武松从小命苦，没爹没娘，只有一个哥哥可以依靠，长兄如父，是哥哥给了他一个虽不富裕却温暖的家。如今自己终于发迹，总算可以好好报答哥哥了。戏文里的大团圆结局也不过如此。可出差一趟回来，哥哥却死了。武松在世上唯一的一个亲人，死了。\n武松什么心情，可想而知。\n武松在灵堂哭泣的那个夜晚，读来令人心碎。\n哥哥死得蹊跷，武松一看便知。他从小吃尽苦头，心思细腻，又做了两年逃犯，江湖经验极丰富，这点手段如何瞒得过他！于是他默默查清真相，收集了全部证据，准备用法律手段让仇人得到应有的下场。\n武松不是天生杀人狂，他也曾相信法律，相信公道。\n他的公道却没有来。\n整个县的司法系统都被西门庆买通了。世间的公理就是谁有钱谁有理。\n你叫武松怎么办？忍了这口气？是可忍，孰不可忍？如果武松不给对自己恩重如山的哥哥报仇，他还配叫人吗？\n于是武松做了个决定，他决定放弃自己的人生。法不给我公道，我自己来给自己公道。于是他精心设计了一个局，在所有街坊邻居的见证下处置了两个主犯，押着一个教唆犯自首了。\n打虎英雄的行为感动了所有人，一直很赏识他的官员特地轻判了他，街坊邻居和部下自发送他盘缠食物。而武松的心里却是空虚的，天地悠悠，家在何处？哥哥的恩情已经无法再报，自己生活的意义是什么呢？\n就这样，他到了孟州。此时的他，毫不遮掩自己的桀骜，仿佛打虎当日喝醉后的不顾一切。前途已经如此黯淡，再糟又能怎样呢？他就这样卷入了施恩与蒋门神的恩怨。\n所谓施恩与蒋门神的恩怨，其实是施恩的父亲与新来的张团练在孟州的地盘之争。武松不是不清楚，但那又怎样？武松不在乎，随你们吧，你让我打，那我就打，我还要索性打得好看一点，教大家笑一笑。整个醉打蒋门神的故事里，武松的精神是颓废的，他完全失去了人生的目标。明知施恩图报，却并不在意，好歹还有酒喝。\n这时候，张都监出现了。他给了武松目标与希望。金钱，地位，这都无所谓，武松把钱都锁进了箱子。最重要的是希望，在张都监这里，武松忽然看到了重新开始的可能，他甚至有了一个未婚妻。武松的精神久违地一振，难道这样的自己还能为了什么而奋斗吗？\n——骗你的啦。\n一切的一切原来是个骗局。希望之后是更深的绝望。那些关于未来的美梦，一个个全都破碎了，只剩下一片黑暗。解决掉暗杀他的两个公人，武松走向了鸳鸯楼。他冷静得可怕，就像为兄报仇的那天一样，只是这次，他不会再留余地了。为了不暴露自己，武松把一路上撞见自己的人全部杀光，包括那个欺骗了他的未婚妻。不是神经病式的屠杀，而是有计划的谋杀。武松的黑化，黑得令人毛骨悚然。一个最强大的英雄，也可以变成一个最可怕的凶犯。\n“杀人者，打虎武松也。”这是挑衅？是炫耀？不，这是投名状。\n从此以后，他拿人祭刀，抢人酒肉，打家劫舍。武松终于成了一个和张青孙二娘他们一路货色的江湖人。一个坏人。\n因为水浒的世界，好人无路可走，只有坏人才能活得快活。这是一个逼得好人去做强盗的世界。水浒告诉我们：当法律无法捍卫正义的时候，人就会变成这个样子。每一个人都可能成为林冲，成为杨志，成为武松。每一个人心中都有的最后一条路，就叫做水泊梁山。\n\n但是，如果梁山中只有林冲和武松这样被社会逼迫而不得不落草的良民，恐怕水浒的现实意义要低一大截。水浒如实地写出了在主流社会之外的另一股恶势力：黑道。它没有简单地将梁山好汉与朝廷写成善恶二元的对立，而是极其细致地描绘出一个与表社会同样复杂而丑陋的里社会。\n江湖人称自己为“好汉”而非“英雄”，他们崇尚的不是正义，而是血性，是义气，是快意恩仇。这群人的组成是极其复杂的：不光有晁盖、裴宣、欧鹏这样的揭竿而起者，还有史进、吕方、郭盛这样从小崇拜古惑仔的杀马特少年，有周通、燕顺这样的土匪恶霸，有张青、孙二娘这样的人肉作坊、有揭阳镇三霸这样的成熟黑社会组织，有石秀、焦挺这样的社会闲散人员，有李逵这样的精神病患者，更有一些人，像宋江、戴宗、柴进，游离在黑白两道之间的灰色地带，左右逢源闷声发财。这帮人有的是天生凶恶，有的是被逼无奈，总之，什么都干，就是不怎么干好事。事实上，水浒中的普通百姓不但受贪官污吏和土豪劣绅的欺压，还受到那些打着替天行道旗帜的所谓“义士”的残酷对待：周通、王英强抢民女，燕顺、孙二娘好吃人肉，穆家兄弟横行乡里，李逵滥杀无辜。这些人的所作所为和高衙内、西门庆、毛太公之流没有任何不同。整部书的一开头就告诉你了，他们不是什么好人，是魔。\n于是水浒中有了一种特殊的受害者：被江湖逼入江湖的人。\n秦明，好好一个军官，剿匪失败被活捉，随即被宋江、燕顺等陷害，全家被杀，在威逼利诱下无奈落草。\n扈三娘，好好一个巾帼英雄，援助结盟村坊时被活捉，全家被杀，在威逼下无奈嫁给变态色魔王英。\n李应，好好一个土豪，梁山要打祝家庄，钱也给了，粮也给了，最后他们说这点钱哪够啊，干脆你人上山来得了。\n徐宁，好好一个教头，因为梁山要破连环马，被自己亲戚汤隆当了投名状，连全家一起诓上了山。他的内心是几乎崩溃的。\n李云，好好一个捕头，教了个叫朱富的孝顺徒弟，自己做贼不忘带着师傅一起，简直日了狗了。\n安道全，好好一个大夫，因为宋江生病了，就被张顺给坑了。想和姘头多待一晚，结果那狗日的居然就把人给杀了还嫁祸给自己。\n最无辜的两个，是朱仝和卢俊义。\n朱仝这个人长得像关公，做事也像关公。义气深重，人见人爱，魅力值满点，男神一样的人物。他为了义气，放走了晁盖，又放走了宋江。如果没有他，梁山的两任老大连村口都出不去就挂了。\n然而这却成了朱仝这辈子最后悔的事情。\n搭档雷横犯了事，朱仝故技重施，偷偷放了他，不惜为此被判了个玩忽职守，刺配沧州。在沧州，朱仝凭着自己的聪明机灵很快就获得了知府的赏识和其子小衙内的喜爱。伶俐人到哪里都吃的开，不出意外的话，相信不久之后，朱仝的生活就能回归正轨了。\n朱仝做着东山再起的美梦，却忘了他的“兄弟”们是怎样的一群豺狼。\n看到小衙内支离破碎的尸体的那一刻，从没失态过的朱仝疯了，他冲上去想和李逵拼个你死我活，却被吴用等人的一跪挡了回来。看着自己不惜牺牲前途也要放走的兄弟们如今居然想出如此毒计来陷害自己，看着那么可爱的一个小孩子因为自己的缘故惨遭横死，朱仝何尝不想把面前这些满嘴大义的禽兽全都砍了。可他能吗？他连李逵都制裁不了，何况晁宋。\n他打心眼里不想和这些人待在一块，可他还能去哪呢？\n\n对救过自己的恩人尚且如此，更何况是别人。\n卢俊义是一个糊涂人。人傻钱多，名望高，底子干净，这样的他成了宋江上位计划理想的的关键棋子。\n出身于财主家庭的卢俊义，像大多数富二代一样从小被娇生惯养，刚愎自用。虽然武艺超群，但这并没有什么卵用。他涉世不深，不知人心险恶，号称自己一个人就能平了梁山，可梁山真来了的时候，没有任何势力的他又能做什么呢？\n一代社会名流被扮成气功大师（误）的吴用成功洗脑，不听忠言，执意作死。被引到梁山泊还高举大旗独自一人挑战整个山寨，结果被车轮战打得找不着北。被抓上山的他天真的以为对方会简单地放了自己。图样。吴用这头稳住他，转头就把墙上反诗的秘密告诉了管家李固让他回家发财。等卢俊义回到大名府遇上报信的忠仆燕青，竟还不相信李固已经背叛他，反而怒斥燕青，自投罗网，身陷囹圄。\n不知深浅，不识好歹。天下无双的玉麒麟，终究只是个外强中干的公子哥而已。在凶残狡猾的黑道面前像个婴儿一般不堪一击。\n智赚玉麒麟这一计，作为宋江上位计划的关键一环，虽然在后半段跟进的时候还是出现了吴用标志性的掉链子，但依然是水浒前七十回最阴最损最毒最厚颜无耻的一计没有之一，堪称吴用狗头军师生涯的巅峰之作。\n这一计中最富戏剧性的是管家李固的命运。李固本来就对不明事理一心作死的主人心怀不满，当听到吴用告诉他的秘密，他却像他的二货主人一样蒙住了双眼，迫不及待地开始了自己的发财大计。故事的最后，他被绑在柱子上，耳边响起了宋江的声音：“休问这厮罪恶，请员外自行发落！”，恐怕直到这时他才醒过味儿来：原来自己只是一枚一开始就注定要被舍弃的棋子。可惜为时已晚。\n卢俊义和李固的故事，展示了普通人面对犯罪团伙侵害时的真实状态。\n像大多数上山的好汉一样，遭逢惨变后的卢俊义也变了，他不再是那个目空一切的公子哥，彻底地屈服了。他乖乖地配合宋老大演戏，让他干什么就干什么。\n宋江顺利的开展上位计划，先是利用绝对不可能做老大的卢俊义捉了史文恭，彻底断绝了山寨内部人员（林冲）夺位的可能，接着又做了一出戏，安排了一场所谓的“公平竞争”，但就算吴用不在卢俊义身边，难道他还敢赢不成？\n卢俊义比谁都清楚自己在梁山的地位：名为副统帅，实际上就是个垫脚石。他也只能安于这种地位。也许在他杀李固的时候就已经明白：自己已经无路可走。\n身陷魔窟，周围是群魔乱舞，一步走错就性命不保。这些被江湖逼进江湖的人，是真正的人在江湖，身不由己。\n\n水浒对于黑道的描写，向我们展示了一个极其可怕的循环：普通人被恶人所害，成为更坏的恶人，然后再去害更多的人。黑恶势力就这样如同滚雪球般不可控制地越来越壮大。\n有一个人曾试图打破这个循环，那就是公孙胜。他曾以探母为由逃离了宋江与晁盖的权力争夺战，结果费尽心思躲藏却还是被强行带回了山寨，宋江用行动告诉他：你一天是黑的，一辈子都得给我是黑的。于是公孙胜再也不敢藏私，从被吴用一喝就能吓住的普通妖道摇身一变就成了大法师。排座次后，他和卢俊义一起住在西边房内，警卫员是宋江的徒弟：孔明和孔亮。不用多说了吧。\n公孙胜的故事告诉我们：一旦进入黑道的循环，就没有人能够逃脱。\n水浒的这种对于地下社会形成机制的深入探讨已经足以让它超越其他所有黑帮小说。但水浒并没有止步于此，它更加深刻地指出了如此庞大的黑势力以及这黑暗的人间地狱能得以形成的根本原因：乱自上作。\n评论中有人说连城诀等作品在黑暗程度上不亚于水浒，两者的差距就在于此。连城诀之类作品仅仅将问题归咎于人性的贪婪这种老生常谈之上，而水浒对社会问题的剖析达到了外科手术般的精准，一下子命中了专制社会的死穴，不仅对人性本恶体现的淋漓尽致，更进一步说明了什么样的社会能够激发人性的恶。这就使水浒不仅仅是一部优秀的小说，而是一部不朽的名著。\n从前有座魔窟，魔窟里有个魔王，魔王的梦想是不要做魔王。\n作为全书第一男主，宋江是水浒塑造得最成功的形象之一，也是最复杂的形象之一。\n就像乞丐的霸主还是乞丐，人渣的首领也只不过是个人渣而已。毫无疑问，宋江是一个坏人，而且是坏人中的坏人。他阴险狡诈，不择手段，厚颜无耻，睚眦必报。他同时拥有老维托·柯里昂的手段与蒋天生的虚伪，是个天生的黑社会老大。\n可他一点也不想当个黑社会老大。\n“自幼曾攻经史，长成亦有权谋。恰似猛虎卧荒丘，潜伏爪牙忍受。”\n宋江是个有野心的人，他原本为自己设计的人生轨迹绝不是每天和一群杀人不眨眼的家伙一起大块吃肉大口喝酒。从一开始，宋江对自己的定位就不是黑道。黑社会，从来都只是宋江的一部分，而不会是全部。宋江的梦想，不是替天行道，而是出将入相，功成名就。\n他开始结交黑势力，只因为他是个老油条。小吏这种工作本来就是要见人说人话，见鬼说鬼话，在黑白势力之间闪转腾挪的。而宋江长袖善舞，对人情世故钻营投机之事十分精通，看人下菜碟的本事已臻化境，不仅在府衙上下无一人说不好，居然还在黑道上博得了“孝义黑三郎”的名声。凭他的精明，如果没有卷进晁盖这件轰动全国的大案，相信他早晚会有机会鱼跃龙门吧。\n某种程度上，宋江上梁山也是被逼无奈。他本已经无数次拒绝了黑道朋友的邀约，可惜酒后现形，栽在黄文炳手里。一生谋划，毁于一旦。小说里展现宋江凶残的情节有很多，但对黄文炳，是这个平日里的斯文人最失态的一次：“生食尔肉”不再只是个形容词，甘冒被全歼的风险也要跑去杀你全家。宋江一辈子再也没对谁有过如此之深的恨意。\n无极里的谢无欢说得好：“你毁了我做好人的机会。”\n被逼成了黑社会的宋江不甘心，于是他找到了另一条路：招安。\n\n招安一直是宋江身上最大的黑点。但事实上招安也许是这些江湖人唯一的出路了。\n与方腊不同，没有根据地，没有人民支持，连粮食都不能自给的梁山，拿什么跟朝廷死磕？人才方面，林冲不过是八十万禁军中一个普通教头，鲁智深不过是老种经略相公帐下的一个提辖，而官军中还不知有多少林冲鲁达。高俅童贯所率的乌合之众也就罢了，如果真的惹恼了朝廷，调一支身经百战的边防军来，剿灭小小的梁山只是须臾之间。何况人是会老的，而梁山没有持续补充人才的好方法，等林冲他们打不动了，梁山的末日也就到了。李逵之流动辄叫嚣打上东京，哪里有那么简单！更重要的一点是山上兄弟的子孙后代怎么办？难道子子孙孙都要做贼吗？\n无论是从实现宋江个人的野心的角度，还是从山寨整体利益的角度来看，招安都是唯一的选择。古往今来几乎所有的黑帮，最终要走的路都是洗白。\n于是宋江联合了同样想洗白的吴用，对一心“与朝廷做个对头”的晁盖一派亮出了爪牙。并最终获胜。金圣叹直说晁盖是宋江所弑，其实我觉得证据不足。但不管怎么说，阻碍山寨发展的晁盖不在了。之后宋江费了一番周折，总算是上位了。没有顾忌的宋江立即开始了招安大计。几次试探，终于成功。\n宋江走向了人生巅峰。\n然后带着所有人落入了深渊。\n\n归根结底，梁山的贼，只是小贼。真正的大贼，在庙堂之上。\n在写梁山的一百零八个魔头之前，作者写了一个人：高俅。而且重点写了他的发迹史。\n高俅是什么出身呢？泼皮，也就是梁山里一抓一大把的那种流氓无赖。如果你注意观察，你会发现对少年高球的描写和对梁山好汉燕青出场的描写几乎一模一样，除了颜值。而他阴险又精明的性格，和宋江极其相似。\n从某种意义上来说，高俅就是一个未入黑道的成功版宋江。\n高俅这样的人是怎么坐上太尉的位子的？因为他背后有人。\n天下的大贼，就是以宋徽宗为首的统治者们。\n一个在国内盗贼四起，边境硝烟不断的时候还饶有兴致地逛妓院的荒唐皇帝，提拔起一众荒唐大臣：因为球踢得好而青云直上的高太尉，年年寿诞都要收取无数金银财宝的蔡太师，因为搜刮奇珍异宝而起家的童媪相，陪着皇上寻花问柳的杨太监······\n单只是花石纲就让不知多少百姓家破人亡，其中又有多少人迫于生计不得不走上犯罪的道路？四大寇为什么能一呼百应？为什么武松和林冲们得不到法律应许的公道？若天下太平，谁愿落草？众匪首尚且是走投无路，更何况那成千上万的喽啰。\n宋江作乱，乱却自上而起。\n宋江自以为能凭着自己的小聪明在朝堂之上游刃有余，却不知真正的魔窟就在此处。梁山的小贼杀人尚有尸首可循，朝廷的大贼吃人却不吐骨头。最凶残的恶人不是梁山的杀人狂，而是这些谈笑间数万生灵涂炭的国之蛀虫。小贼想和大贼斗？你们还太嫩了。\n君不闻窃钩者诛，窃国者侯。\n上山？不上山？招安？不招安？无论哪条路都是死路。\n\n纵观水浒，你找不到一个高大全的人物，每一个主角都只是如你我一样有好处也有缺点的普通人，一百零八将，一百零八种面目，却只能走向同一个归宿。他们可恨吗？当然可恨。\n他们有多可恨，就有多可悲。\n和四大名著的其他三部一样，水浒也是一部关于人生，关于社会，关于世界的大悲剧。水浒讲的是在一个扭曲的世界中普通人的选择与畸变。它用近乎完美的古白话与精巧的谋篇布局把一个触目惊心而又发人深省的故事传达给读者。作者春秋笔法不做评判，而其中的悲壮与凄凉却透纸而来。\n水浒不只属于一个时代，而属于所有时代。每次翻开水浒，看着其中的一些面孔，总令我想起另一时空中的另一些面孔，是否，他们本不必走上这样的道路？是否，这个社会可以少让一些人走上梁山？水浒对我们这个时代最大的意义，也许就在于此吧。',3,0,'2016-04-14 00:00:00',1,2,3),(2,'想起来一个细节，李逵老妈被老虎吃掉后回梁山向宋江众好汉哭诉，众好汉不为所动，却是纷纷大笑。想一想，老妈死了找兄弟哭，兄弟们浑不在意，纷纷哈哈大笑起来，这是什么写法？\n\n不管百回本还是金圣叹本，都有这个笑，只是笑的次序稍有变化：百回本是在李逵说了自己打杀了吃母的老虎后又说到假李逵剪径被杀“众人大笑，晁、宋二人笑道…”，金批本是直放在老母被吃一事之后“宋江大笑”；前后次序处理上看得出金圣叹动了小心思，但其实不论哪一版，在现代人的视角看来都未免太过冷血不近人情。\n\n水浒传写的不一般，就不一般在宋江等好汉这个笑，而不是李逵的哭。突破了人性和秩序的好汉们是怎生做人做事的？水浒里的一个个人物，不是以我们这个时代惯常的社交模式和情感惯性来行事，它近乎原始地描摹了那个时代下匪类的真实情态。',2,0,'2016-04-14 00:00:00',1,3,3),(3,'说的不错',1,1,'2016-04-15 17:57:23',1,1,11),(4,'让人很有感触！！',1,0,'2016-04-15 21:39:55',1,1,1),(5,'哈哈哈哈',1,0,'2016-04-16 14:14:03',1,1,1),(6,'啊实打实的',0,0,'2016-04-16 14:17:16',1,1,15),(7,'很厉害！！',1,1,'2016-04-16 14:41:51',1,1,16);
/*!40000 ALTER TABLE `T_BOOKPOST_COMMENT` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_BOOKPOST_COMMENT_REPLY`
--

DROP TABLE IF EXISTS `T_BOOKPOST_COMMENT_REPLY`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_BOOKPOST_COMMENT_REPLY` (
  `pk_reply_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '图书评论回复表编号',
  `reply_content` varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '回复内容',
  `reply_support` int(11) NOT NULL COMMENT '回复点赞量',
  `reply_isreply_author` int(11) NOT NULL DEFAULT '1' COMMENT '是否是直接对作者的内容进行回复',
  `reply_time` datetime NOT NULL COMMENT '回复时间',
  `reply_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `fk_bpcr_user_id` int(11) NOT NULL COMMENT '回复人',
  `fk_bpcr_user_id_receiver` int(11) NOT NULL COMMENT '回复接收人（为回复此条评论的任意一人，不仅只是评论作者）',
  `fk_bpcr_bpc_id` int(11) NOT NULL COMMENT '评论编号',
  PRIMARY KEY (`pk_reply_id`),
  KEY `fk_T_COMMENT_REPLY_T_USER1_idx` (`fk_bpcr_user_id`),
  KEY `fk_T_COMMENT_REPLY_T_USER2_idx` (`fk_bpcr_user_id_receiver`),
  KEY `fk_T_COMMENT_REPLY_T_BOOKPOST_COMMENT1_idx` (`fk_bpcr_bpc_id`),
  CONSTRAINT `fk_T_COMMENT_REPLY_T_BOOKPOST_COMMENT1` FOREIGN KEY (`fk_bpcr_bpc_id`) REFERENCES `T_BOOKPOST_COMMENT` (`pk_bookpost_comment_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_COMMENT_REPLY_T_USER1` FOREIGN KEY (`fk_bpcr_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_COMMENT_REPLY_T_USER2` FOREIGN KEY (`fk_bpcr_user_id_receiver`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_BOOKPOST_COMMENT_REPLY`
--

LOCK TABLES `T_BOOKPOST_COMMENT_REPLY` WRITE;
/*!40000 ALTER TABLE `T_BOOKPOST_COMMENT_REPLY` DISABLE KEYS */;
INSERT INTO `T_BOOKPOST_COMMENT_REPLY` VALUES (1,'太偏激了些',0,1,'2016-04-15 15:19:16',1,1,2,1),(2,'很好',0,1,'2016-04-15 15:20:44',1,1,2,1),(3,'正义的包裹，法律不送货上门，那就自己去取吧',0,1,'2016-04-15 15:21:07',1,1,2,1),(4,'没看懂',0,1,'2016-04-15 15:23:32',1,1,3,2),(5,'说得不错',0,1,'2016-04-15 15:23:39',1,1,3,2),(6,'a s d f sa d f',0,1,'2016-04-15 21:49:06',1,1,1,4),(7,'Aaa',0,1,'2016-04-16 10:06:13',1,1,1,3),(8,'你说的很对',0,1,'2016-04-16 14:14:34',1,1,1,5),(9,'说的没错！',0,1,'2016-04-16 14:42:12',1,1,1,7);
/*!40000 ALTER TABLE `T_BOOKPOST_COMMENT_REPLY` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_BOOKPOST_COMMENT_REPLY_SUP_RECORD`
--

DROP TABLE IF EXISTS `T_BOOKPOST_COMMENT_REPLY_SUP_RECORD`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_BOOKPOST_COMMENT_REPLY_SUP_RECORD` (
  `pk_support_record_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '图书贴评论回复点赞记录表编号',
  `support_record_time` datetime NOT NULL COMMENT '记录添加时间',
  `support_record_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `fk_bpcr_sup_record_bpcr_id` int(11) NOT NULL COMMENT '回复编号',
  `fk_bpcr_sup_record_user_id` int(11) NOT NULL COMMENT '点赞人编号',
  PRIMARY KEY (`pk_support_record_id`),
  KEY `fk_T_BOOKPOST_COMMENT_REPLY_SUP_RECORD_T_BOOKPOST_COMMENT_R_idx` (`fk_bpcr_sup_record_bpcr_id`),
  KEY `fk_T_BOOKPOST_COMMENT_REPLY_SUP_RECORD_T_USER1_idx` (`fk_bpcr_sup_record_user_id`),
  CONSTRAINT `fk_T_BOOKPOST_COMMENT_REPLY_SUP_RECORD_T_BOOKPOST_COMMENT_REP1` FOREIGN KEY (`fk_bpcr_sup_record_bpcr_id`) REFERENCES `T_BOOKPOST_COMMENT_REPLY` (`pk_reply_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_BOOKPOST_COMMENT_REPLY_SUP_RECORD_T_USER1` FOREIGN KEY (`fk_bpcr_sup_record_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_BOOKPOST_COMMENT_REPLY_SUP_RECORD`
--

LOCK TABLES `T_BOOKPOST_COMMENT_REPLY_SUP_RECORD` WRITE;
/*!40000 ALTER TABLE `T_BOOKPOST_COMMENT_REPLY_SUP_RECORD` DISABLE KEYS */;
INSERT INTO `T_BOOKPOST_COMMENT_REPLY_SUP_RECORD` VALUES (1,'2016-04-16 14:14:46',0,8,1);
/*!40000 ALTER TABLE `T_BOOKPOST_COMMENT_REPLY_SUP_RECORD` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_BOOKPOST_COMMENT_SUP_RECORD`
--

DROP TABLE IF EXISTS `T_BOOKPOST_COMMENT_SUP_RECORD`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_BOOKPOST_COMMENT_SUP_RECORD` (
  `pk_support_record_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '评论点赞记录表编号',
  `support_record_time` datetime NOT NULL COMMENT '记录添加时间',
  `support_record_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `fk_bpc_sup_record_bpc_id` int(11) NOT NULL COMMENT '评论编号',
  `fk_bpc_sup_record_user_id` int(11) NOT NULL COMMENT '点赞人编号',
  PRIMARY KEY (`pk_support_record_id`),
  KEY `fk_T_BOOKPOST_COMMENT_SUPPORT_T_BOOKPOST_COMMENT1_idx` (`fk_bpc_sup_record_bpc_id`),
  KEY `fk_T_BOOKPOST_COMMENT_SUPPORT_T_USER1_idx` (`fk_bpc_sup_record_user_id`),
  CONSTRAINT `fk_T_BOOKPOST_COMMENT_SUPPORT_T_BOOKPOST_COMMENT1` FOREIGN KEY (`fk_bpc_sup_record_bpc_id`) REFERENCES `T_BOOKPOST_COMMENT` (`pk_bookpost_comment_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_BOOKPOST_COMMENT_SUPPORT_T_USER1` FOREIGN KEY (`fk_bpc_sup_record_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_BOOKPOST_COMMENT_SUP_RECORD`
--

LOCK TABLES `T_BOOKPOST_COMMENT_SUP_RECORD` WRITE;
/*!40000 ALTER TABLE `T_BOOKPOST_COMMENT_SUP_RECORD` DISABLE KEYS */;
INSERT INTO `T_BOOKPOST_COMMENT_SUP_RECORD` VALUES (1,'2016-04-15 21:38:11',1,3,1),(2,'2016-04-16 13:40:09',0,4,1),(3,'2016-04-16 14:42:04',1,7,1);
/*!40000 ALTER TABLE `T_BOOKPOST_COMMENT_SUP_RECORD` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_BOOKPOST_SUP_RECORD`
--

DROP TABLE IF EXISTS `T_BOOKPOST_SUP_RECORD`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_BOOKPOST_SUP_RECORD` (
  `pk_support_record_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '图书贴点赞记录表编号',
  `support_record_time` datetime NOT NULL COMMENT '记录添加时间',
  `support_record_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `fk_bp_sup_record_bp_id` int(11) NOT NULL COMMENT '图书贴编号',
  `fk_bp_sup_record_user_id` int(11) NOT NULL COMMENT '点赞人编号',
  PRIMARY KEY (`pk_support_record_id`),
  KEY `fk_T_BOOKPOST_SUP_RECORD_T_BOOKPOST1_idx` (`fk_bp_sup_record_bp_id`),
  KEY `fk_T_BOOKPOST_SUP_RECORD_T_USER1_idx` (`fk_bp_sup_record_user_id`),
  CONSTRAINT `fk_T_BOOKPOST_SUP_RECORD_T_BOOKPOST1` FOREIGN KEY (`fk_bp_sup_record_bp_id`) REFERENCES `T_BOOKPOST` (`pk_bookpost_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_BOOKPOST_SUP_RECORD_T_USER1` FOREIGN KEY (`fk_bp_sup_record_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_BOOKPOST_SUP_RECORD`
--

LOCK TABLES `T_BOOKPOST_SUP_RECORD` WRITE;
/*!40000 ALTER TABLE `T_BOOKPOST_SUP_RECORD` DISABLE KEYS */;
INSERT INTO `T_BOOKPOST_SUP_RECORD` VALUES (1,'2016-04-16 14:13:28',1,1,1),(2,'2016-04-16 14:17:18',1,15,1),(3,'2016-04-16 14:41:40',1,16,1);
/*!40000 ALTER TABLE `T_BOOKPOST_SUP_RECORD` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_BOOK_REPLY`
--

DROP TABLE IF EXISTS `T_BOOK_REPLY`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_BOOK_REPLY` (
  `pk_book_reply_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '图书评论表编号',
  `book_reply_content` longtext COLLATE utf8_unicode_ci COMMENT '评论内容',
  `book_reply_support` int(11) NOT NULL DEFAULT '0' COMMENT '评论点赞量',
  `book_reply_time` datetime NOT NULL COMMENT '评论时间',
  `book_reply_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `fk_br_user_id` int(11) NOT NULL COMMENT '评论人',
  `fk_br_book_id` int(11) NOT NULL COMMENT '图书编号',
  PRIMARY KEY (`pk_book_reply_id`),
  KEY `fk_T_BOOK_REPLY_T_USER1_idx` (`fk_br_user_id`),
  KEY `fk_T_BOOK_REPLY_T_BOOK1_idx` (`fk_br_book_id`),
  CONSTRAINT `fk_T_BOOK_REPLY_T_BOOK1` FOREIGN KEY (`fk_br_book_id`) REFERENCES `T_BOOK` (`pk_book_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_BOOK_REPLY_T_USER1` FOREIGN KEY (`fk_br_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=20 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_BOOK_REPLY`
--

LOCK TABLES `T_BOOK_REPLY` WRITE;
/*!40000 ALTER TABLE `T_BOOK_REPLY` DISABLE KEYS */;
INSERT INTO `T_BOOK_REPLY` VALUES (17,'这部漫画，从画风上显得很粗糙，但是从设定上却很细腻，围绕着朋友留下的遗产，主人公陷入了一生解密之路。不过，我想说点题外话，是漫画引发出来的思考。我们年轻的时候，都喜欢看书，各式各样的书，从书中好像能够看到世界的一切，我们试图将书中的世界搬到我们自己的生活之中，我们在这个过程中，不知不觉模仿了文本的世界，并将两个世界联系在了一起。不过，问题在于我们究竟是从文本世界走到现实世界，还是从现实世界在寻找理想的世界？漫画最后，是作者给我们的答案，当我们找到了谜题作者留给我们的，那就是我们能够相互交流沟通的。但是，我却不满意这样的答案。沉迷于文本世界，让世界失去了原本的色彩。还原世界的色彩，也许我们才能区分现实与文本世界的界限。当然，我想文本再美好，也需要来自现实世界的色彩。',0,'2016-04-12 20:58:59',1,1,48),(18,'台湾人的翻译，一向都是不错的～～',0,'2016-04-13 08:58:26',1,1,51),(19,'激发了大煞风景撒的咖啡机卢卡斯大家',1,'2016-04-16 14:52:21',1,1,48);
/*!40000 ALTER TABLE `T_BOOK_REPLY` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_BOOK_REPLY_SUP_RECORD`
--

DROP TABLE IF EXISTS `T_BOOK_REPLY_SUP_RECORD`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_BOOK_REPLY_SUP_RECORD` (
  `pk_support_record_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '图书评论点赞记录表编号',
  `support_record_time` datetime NOT NULL COMMENT '记录添加时间',
  `support_record_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `fk_br_sup_record_br_id` int(11) NOT NULL COMMENT '图书评论编号',
  `fk_br_sup_record_user_id` int(11) NOT NULL COMMENT '点赞人编号',
  PRIMARY KEY (`pk_support_record_id`),
  KEY `fk_T_BOOK_REPLY_SUP_RECORD_T_BOOK_REPLY1_idx` (`fk_br_sup_record_br_id`),
  KEY `fk_T_BOOK_REPLY_SUP_RECORD_T_USER1_idx` (`fk_br_sup_record_user_id`),
  CONSTRAINT `fk_T_BOOK_REPLY_SUP_RECORD_T_BOOK_REPLY1` FOREIGN KEY (`fk_br_sup_record_br_id`) REFERENCES `T_BOOK_REPLY` (`pk_book_reply_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_BOOK_REPLY_SUP_RECORD_T_USER1` FOREIGN KEY (`fk_br_sup_record_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_BOOK_REPLY_SUP_RECORD`
--

LOCK TABLES `T_BOOK_REPLY_SUP_RECORD` WRITE;
/*!40000 ALTER TABLE `T_BOOK_REPLY_SUP_RECORD` DISABLE KEYS */;
INSERT INTO `T_BOOK_REPLY_SUP_RECORD` VALUES (1,'2016-04-16 14:52:26',1,19,1);
/*!40000 ALTER TABLE `T_BOOK_REPLY_SUP_RECORD` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_COUPLET`
--

DROP TABLE IF EXISTS `T_COUPLET`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_COUPLET` (
  `pk_couplet_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '对联表编号',
  `couplet_content` varchar(100) COLLATE utf8_unicode_ci NOT NULL COMMENT '对联内容',
  `couplet_support` int(11) NOT NULL DEFAULT '0' COMMENT '对联点赞量',
  `couplet_reply_number` int(11) NOT NULL DEFAULT '0' COMMENT '对联回复人数',
  `couplet_collect_number` int(11) NOT NULL DEFAULT '0' COMMENT '收藏对联人数',
  `couplet_time` datetime NOT NULL COMMENT '出对时间',
  `couplet_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `fk_couplet_user_id` int(11) NOT NULL COMMENT '出对人',
  PRIMARY KEY (`pk_couplet_id`),
  KEY `fk_T_COUPLET_T_USER1_idx` (`fk_couplet_user_id`),
  CONSTRAINT `fk_T_COUPLET_T_USER1` FOREIGN KEY (`fk_couplet_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=29 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_COUPLET`
--

LOCK TABLES `T_COUPLET` WRITE;
/*!40000 ALTER TABLE `T_COUPLET` DISABLE KEYS */;
INSERT INTO `T_COUPLET` VALUES (1,'飞雪连天射白鹿',0,0,0,'2014-05-21 12:00:05',1,1),(2,'白日依山尽',0,0,0,'2014-09-21 09:00:05',1,2),(3,'举头望明月',0,0,0,'2014-11-30 08:02:05',1,3),(4,'人生若只如初见，何事秋风悲画扇。',0,0,0,'2014-12-01 08:02:05',1,1),(5,'曾经沧海难为水，除却巫山不是云。',0,0,0,'2014-12-02 08:02:05',1,1),(6,'明月几时有？把酒问青天。',0,0,0,'2014-12-03 08:02:05',1,2),(7,'恰同学少年，风华正茂。',0,0,0,'2014-12-04 08:02:05',1,1),(8,'夜来风雨声，花落知多少。',0,0,0,'2014-12-05 08:02:05',1,2),(9,'鸳鸯湖畔草粘天，二月春深好放船。',0,0,0,'2014-12-06 08:02:05',1,1),(10,'堂前扑枣任西邻，无食无儿一妇人。',0,0,0,'2014-12-06 08:02:07',1,3),(11,'孤山寺北贾亭西，水面初平云脚低。',0,0,0,'2014-12-06 09:02:05',1,3),(12,'清晨入古寺，初日照高林。',0,0,0,'2014-12-06 11:02:05',1,2),(13,'胜日寻芳泗水滨，无边光景一时新。',0,0,0,'2014-12-07 08:02:05',1,1),(14,'京口瓜洲一水间，钟山只隔数重山。',0,0,0,'2014-12-08 08:02:05',1,2),(15,'人闲桂花落，夜静春山空。',0,0,0,'2014-12-09 08:02:05',1,1),(16,'北风卷地白草折，胡天八月即飞雪。',0,0,0,'2014-12-10 08:02:05',1,2),(17,'千山鸟飞绝，万径人踪灭。',0,0,0,'2014-12-11 08:02:05',1,4),(18,'纷纷暮雪下辕门，风掣红旗冻不翻。',0,0,0,'2014-12-12 08:02:05',1,1),(19,'日暮苍山远，天寒白屋贫。',0,0,0,'2014-12-13 08:02:05',1,2),(20,'有梅无雪不精神，有雪无诗俗了人。',0,0,0,'2014-12-14 08:02:05',1,2),(21,'风劲角弓鸣，将军猎渭城。',0,0,0,'2014-12-15 08:02:05',1,1),(22,'君自故乡来，应知故乡事。',0,0,0,'2014-12-16 08:02:05',1,2),(23,'一树寒梅白玉条，迥临村路傍溪桥。',0,0,0,'2014-12-17 08:02:05',1,3),(24,'数萼初含雪，孤标画本难。',0,0,0,'2014-12-18 08:02:05',1,4),(25,'定定住天涯，依依向物华。',0,0,0,'2014-12-19 08:02:05',1,1),(26,'万木冻欲折，孤根暖独回。',1,2,1,'2014-12-20 08:02:05',1,2),(27,'一二三四',0,0,0,'2016-04-16 14:16:18',1,1),(28,'哈哈哈',1,1,1,'2016-04-16 14:44:46',1,1);
/*!40000 ALTER TABLE `T_COUPLET` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_COUPLET_REPLY`
--

DROP TABLE IF EXISTS `T_COUPLET_REPLY`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_COUPLET_REPLY` (
  `pk_couplet_reply_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '对联回复表编号',
  `reply_content` varchar(200) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '回复内容',
  `reply_support` int(11) NOT NULL COMMENT '回复点赞量',
  `reply_time` datetime NOT NULL COMMENT '回复时间',
  `reply_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `fk_cr_couplet_id` int(11) NOT NULL COMMENT '对联编号',
  `fk_cr_user_id` int(11) NOT NULL COMMENT '回复人',
  PRIMARY KEY (`pk_couplet_reply_id`),
  KEY `fk_T_COUPLET_REPLYS_T_COUPLET1_idx` (`fk_cr_couplet_id`),
  KEY `fk_T_COUPLET_REPLY_T_USER1_idx` (`fk_cr_user_id`),
  CONSTRAINT `fk_T_COUPLET_REPLYS_T_COUPLET1` FOREIGN KEY (`fk_cr_couplet_id`) REFERENCES `T_COUPLET` (`pk_couplet_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_COUPLET_REPLY_T_USER1` FOREIGN KEY (`fk_cr_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_COUPLET_REPLY`
--

LOCK TABLES `T_COUPLET_REPLY` WRITE;
/*!40000 ALTER TABLE `T_COUPLET_REPLY` DISABLE KEYS */;
INSERT INTO `T_COUPLET_REPLY` VALUES (1,'啊啊啊',0,'2016-04-15 21:59:49',1,26,1),(2,'aaaaa',1,'2016-04-16 14:15:35',1,26,1),(3,'呵呵呵',1,'2016-04-16 14:45:00',1,28,1);
/*!40000 ALTER TABLE `T_COUPLET_REPLY` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_COUPLET_REPLY_SUP_RECORD`
--

DROP TABLE IF EXISTS `T_COUPLET_REPLY_SUP_RECORD`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_COUPLET_REPLY_SUP_RECORD` (
  `pk_support_record_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '对联回复点赞记录编号',
  `support_record_time` datetime NOT NULL COMMENT '记录添加时间',
  `support_record_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `fk_cr_sup_record_cr_id` int(11) NOT NULL COMMENT '对联回复编号',
  `fk_cr_sup_record_user_id` int(11) NOT NULL COMMENT '点赞人编号',
  PRIMARY KEY (`pk_support_record_id`),
  KEY `fk_T_COUPLET_REPLY_SUPPORT_T_COUPLET_REPLY1_idx` (`fk_cr_sup_record_cr_id`),
  KEY `fk_T_COUPLET_REPLY_SUPPORT_T_USER1_idx` (`fk_cr_sup_record_user_id`),
  CONSTRAINT `fk_T_COUPLET_REPLY_SUPPORT_T_COUPLET_REPLY1` FOREIGN KEY (`fk_cr_sup_record_cr_id`) REFERENCES `T_COUPLET_REPLY` (`pk_couplet_reply_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_COUPLET_REPLY_SUPPORT_T_USER1` FOREIGN KEY (`fk_cr_sup_record_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_COUPLET_REPLY_SUP_RECORD`
--

LOCK TABLES `T_COUPLET_REPLY_SUP_RECORD` WRITE;
/*!40000 ALTER TABLE `T_COUPLET_REPLY_SUP_RECORD` DISABLE KEYS */;
INSERT INTO `T_COUPLET_REPLY_SUP_RECORD` VALUES (1,'2016-04-16 14:15:59',1,2,1),(2,'2016-04-16 14:45:07',1,3,1);
/*!40000 ALTER TABLE `T_COUPLET_REPLY_SUP_RECORD` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_COUPLET_SUP_RECORD`
--

DROP TABLE IF EXISTS `T_COUPLET_SUP_RECORD`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_COUPLET_SUP_RECORD` (
  `pk_support_record_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '对联点赞记录表编号',
  `support_record_time` datetime NOT NULL COMMENT '记录添加时间',
  `support_record_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `fk_couplet_sup_record_couplet_id` int(11) NOT NULL COMMENT '对联编号',
  `fk_couplet_sup_record_user_id` int(11) NOT NULL COMMENT '点赞人编号',
  PRIMARY KEY (`pk_support_record_id`),
  KEY `fk_T_COUPLET_SUP_RECORD_T_USER1_idx` (`fk_couplet_sup_record_user_id`),
  KEY `fk_T_COUPLET_SUP_RECORD_T_COUPLET1_idx` (`fk_couplet_sup_record_couplet_id`),
  CONSTRAINT `fk_T_COUPLET_SUP_RECORD_T_COUPLET1` FOREIGN KEY (`fk_couplet_sup_record_couplet_id`) REFERENCES `T_COUPLET` (`pk_couplet_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_COUPLET_SUP_RECORD_T_USER1` FOREIGN KEY (`fk_couplet_sup_record_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_COUPLET_SUP_RECORD`
--

LOCK TABLES `T_COUPLET_SUP_RECORD` WRITE;
/*!40000 ALTER TABLE `T_COUPLET_SUP_RECORD` DISABLE KEYS */;
INSERT INTO `T_COUPLET_SUP_RECORD` VALUES (1,'2016-04-16 14:15:57',1,26,1),(2,'2016-04-16 14:45:05',1,28,1);
/*!40000 ALTER TABLE `T_COUPLET_SUP_RECORD` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_FIELD`
--

DROP TABLE IF EXISTS `T_FIELD`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_FIELD` (
  `pk_field_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '领域表编号',
  `field_name` varchar(20) COLLATE utf8_unicode_ci NOT NULL COMMENT '领域名称',
  `field_time` datetime NOT NULL COMMENT '记录添加时间',
  `field_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  PRIMARY KEY (`pk_field_id`)
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_FIELD`
--

LOCK TABLES `T_FIELD` WRITE;
/*!40000 ALTER TABLE `T_FIELD` DISABLE KEYS */;
INSERT INTO `T_FIELD` VALUES (1,'散文','2015-08-28 00:00:00',1),(2,'军事','2015-09-01 00:00:00',1),(3,'传记','2015-09-09 00:00:01',1),(4,'科幻','2015-09-09 00:00:02',1),(5,'生活','2015-09-09 00:00:03',1),(6,'漫画','2015-09-09 00:00:04',1),(7,'历史','2015-09-09 00:00:05',1),(8,'原创','2015-09-09 00:00:06',1),(9,'小说','2015-09-09 00:00:07',1),(10,'名著','2015-09-09 00:00:08',1);
/*!40000 ALTER TABLE `T_FIELD` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_LEVELS`
--

DROP TABLE IF EXISTS `T_LEVELS`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_LEVELS` (
  `pk_level_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '等级表编号',
  `level_name` varchar(40) COLLATE utf8_unicode_ci NOT NULL COMMENT '等级称谓',
  `level_min_exp` int(11) NOT NULL COMMENT '等级下限经验值',
  `level_max_exp` int(11) NOT NULL COMMENT '等级上限经验值',
  `level_time` datetime NOT NULL COMMENT '记录添加时间',
  `level_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  PRIMARY KEY (`pk_level_id`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_LEVELS`
--

LOCK TABLES `T_LEVELS` WRITE;
/*!40000 ALTER TABLE `T_LEVELS` DISABLE KEYS */;
INSERT INTO `T_LEVELS` VALUES (1,'白衣文士',0,1000,'2015-10-10 21:00:00',1),(2,'楚楚不凡',1000,3000,'2015-10-10 21:00:01',1),(3,'满腹经纶',3000,6000,'2015-10-10 21:00:05',1),(4,'博古通今',6000,12000,'2015-10-10 21:00:08',1),(5,'通天晓地',12000,24000,'2015-10-10 21:00:09',1);
/*!40000 ALTER TABLE `T_LEVELS` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_QUESTION`
--

DROP TABLE IF EXISTS `T_QUESTION`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_QUESTION` (
  `pk_question_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '题目表编号',
  `question_content` varchar(45) COLLATE utf8_unicode_ci NOT NULL COMMENT '题目内容',
  `question_option_one` varchar(45) COLLATE utf8_unicode_ci NOT NULL COMMENT '选项一',
  `question_option_two` varchar(45) COLLATE utf8_unicode_ci NOT NULL COMMENT '选项二',
  `question_option_three` varchar(45) COLLATE utf8_unicode_ci NOT NULL COMMENT '选项三',
  `question_answer` varchar(45) COLLATE utf8_unicode_ci NOT NULL COMMENT '正确答案',
  `question_collect_number` int(11) NOT NULL DEFAULT '0' COMMENT '收藏题目人数',
  `question_show_order` varchar(45) CHARACTER SET utf8 NOT NULL DEFAULT '1234' COMMENT '选项展示顺序',
  `question_time` datetime NOT NULL COMMENT '记录添加时间',
  `question_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `fk_question_user_id` int(11) NOT NULL COMMENT '出题人',
  `fk_question_state_id` int(11) NOT NULL DEFAULT '5' COMMENT '题目状态',
  PRIMARY KEY (`pk_question_id`),
  KEY `fk_T_QUESTION_T_USER1_idx` (`fk_question_user_id`),
  KEY `fk_T_QUESTION_T_STATE1_idx` (`fk_question_state_id`),
  CONSTRAINT `fk_T_QUESTION_T_STATE1` FOREIGN KEY (`fk_question_state_id`) REFERENCES `T_STATE` (`pk_state_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_QUESTION_T_USER1` FOREIGN KEY (`fk_question_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=23 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_QUESTION`
--

LOCK TABLES `T_QUESTION` WRITE;
/*!40000 ALTER TABLE `T_QUESTION` DISABLE KEYS */;
INSERT INTO `T_QUESTION` VALUES (1,'火影忍者中冷君指的是谁？','自来也','纲手','森之千手','大蛇丸',2,'1234','2015-10-10 10:00:00',1,1,7),(2,'唐砖中皇帝被称为？','黄二','黄三','李三','李二',1,'1234','2015-10-10 10:00:01',1,2,7),(3,'文化苦旅的作者是谁？','余春雨','余夏雨','余东宇','余秋雨',0,'1234','2015-10-10 10:00:02',1,3,7),(4,'寒蝉凄切的词牌名是啥？','念奴娇','木兰花','清平乐','雨霖铃',1,'1234','2015-10-10 10:00:03',1,4,7),(5,'苏轼是哪个朝代的？','唐','五代十国','明','宋',1,'1234','2015-10-10 10:00:04',1,5,7),(6,'李清照号什么？','清岚居士','青莲居士','宜章居士','易安居士',0,'1234','2015-10-10 10:00:05',1,6,6),(7,'李清照是哪个朝代的？','唐','魏晋','三国','宋',0,'1234','2015-10-10 10:00:06',1,7,6),(8,'下面哪一部不是倪匡的著作','钻石花','地底奇人','妖火','侠客行',0,'1234','2015-10-10 10:00:07',1,8,6),(9,'下面哪一部是倪匡的著作','海尔兄弟','三体','狂蟒之灾','蜂云',0,'1234','2015-10-10 10:00:08',1,9,6),(10,'香港四大才子谁年龄最大','倪匡','黄沾','蔡澜','金庸',0,'1234','2015-10-10 10:00:09',1,10,6),(21,'11111','22222','3333','4444','5555',0,'2413','2016-04-12 16:29:13',1,1,5),(22,'问题','yi1','而','三1','四',0,'1234','2016-04-16 14:49:25',1,1,5);
/*!40000 ALTER TABLE `T_QUESTION` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_STATE`
--

DROP TABLE IF EXISTS `T_STATE`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_STATE` (
  `pk_state_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '状态表编号',
  `state_name` varchar(20) COLLATE utf8_unicode_ci NOT NULL COMMENT '状态名称',
  `state_value` int(11) NOT NULL COMMENT '状态值',
  `state_type` varchar(20) COLLATE utf8_unicode_ci NOT NULL COMMENT '状态类型(标识所属哪个表)',
  `state_time` datetime NOT NULL COMMENT '记录添加时间',
  `state_usable` int(11) DEFAULT '1' COMMENT '是否可用',
  PRIMARY KEY (`pk_state_id`)
) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_STATE`
--

LOCK TABLES `T_STATE` WRITE;
/*!40000 ALTER TABLE `T_STATE` DISABLE KEYS */;
INSERT INTO `T_STATE` VALUES (1,'待审核',0,'Thesis','2015-10-10 01:00:01',1),(2,'未使用',1,'Thesis','2015-10-10 01:00:02',1),(3,'正在使用',2,'Thesis','2015-10-10 01:00:03',1),(4,'已使用',3,'Thesis','2015-10-10 01:00:04',1),(5,'待审核',0,'Question','2015-10-10 01:00:05',1),(6,'未使用',1,'Question','2015-10-10 01:00:06',1),(7,'正在使用',2,'Question','2015-10-10 01:00:07',1),(8,'已使用',3,'Question','2015-10-10 01:00:08',1),(9,'匿名',0,'Argument','2015-10-10 01:00:09',1),(10,'不匿名',1,'Argument','2015-10-10 01:00:10',1),(11,'待审核',0,'Book','2015-10-10 01:00:11',1),(12,'已审核',1,'Book','2015-10-10 01:00:12',1);
/*!40000 ALTER TABLE `T_STATE` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_THESIS`
--

DROP TABLE IF EXISTS `T_THESIS`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_THESIS` (
  `pk_thesis_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '辩题表编号',
  `thesis_content` varchar(200) COLLATE utf8_unicode_ci NOT NULL COMMENT '辩题内容',
  `thesis_pros` varchar(100) COLLATE utf8_unicode_ci NOT NULL COMMENT '正方论点',
  `thesis_pros_count` int(11) NOT NULL DEFAULT '0' COMMENT '正方支持人数',
  `thesis_pros_reply_number` int(11) NOT NULL DEFAULT '0' COMMENT '正方回复人数',
  `thesis_cons` varchar(100) COLLATE utf8_unicode_ci NOT NULL COMMENT '反方论点',
  `thesis_cons_count` int(11) NOT NULL DEFAULT '0' COMMENT '反方支持人数',
  `thesis_cons_reply_number` int(11) NOT NULL DEFAULT '0' COMMENT '反方回复人数',
  `thesis_collect_number` int(11) NOT NULL DEFAULT '0' COMMENT '收藏辩题人数',
  `thesis_start_time` datetime NOT NULL COMMENT '辩题开始时间',
  `thesis_end_time` datetime NOT NULL COMMENT '辩题结束时间',
  `thesis_time` datetime NOT NULL COMMENT '记录添加时间',
  `thesis_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `thesis_add_reson` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '添加辩题原因',
  `fk_thesis_state_id` int(11) NOT NULL DEFAULT '0' COMMENT '辩题状态',
  `fk_thesis_user_id` int(11) NOT NULL COMMENT '贡献辩题人',
  PRIMARY KEY (`pk_thesis_id`),
  KEY `fk_T_THESIS_T_STATES1_idx` (`fk_thesis_state_id`),
  KEY `fk_T_THESIS_T_USER1_idx` (`fk_thesis_user_id`),
  CONSTRAINT `fk_T_THESIS_T_STATES1` FOREIGN KEY (`fk_thesis_state_id`) REFERENCES `T_STATE` (`pk_state_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_THESIS_T_USER1` FOREIGN KEY (`fk_thesis_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=20 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_THESIS`
--

LOCK TABLES `T_THESIS` WRITE;
/*!40000 ALTER TABLE `T_THESIS` DISABLE KEYS */;
INSERT INTO `T_THESIS` VALUES (1,'人性本善还是本恶','人性本善',0,2,'人性本恶',0,1,1,'2015-09-27 01:00:00','2015-10-01 01:00:00','2015-11-01 10:00:00',1,NULL,3,1),(2,'金钱是不是万恶之源','金钱是万恶之源',0,0,'金钱不是万恶之源',0,0,0,'2015-10-01 01:00:01','2015-10-05 01:00:00','2015-11-01 10:00:01',1,NULL,2,1),(3,'大学应不应该封校','大学应该封校',0,0,'大学不应该封校',0,0,0,'2015-10-05 01:00:01','2015-10-09 01:00:00','2015-11-01 10:00:02',1,NULL,1,1),(4,'个人的命运是由个人掌握还是社会掌握','个人命运是由个人掌握',0,0,'个人命运是由社会掌握',0,0,0,'2015-10-09 01:00:01','2015-10-13 01:00:00','2015-11-01 10:00:03',1,NULL,1,1),(5,'便利器具便不便利','便利器具便利',0,0,'便利器具不便利',0,0,0,'2015-10-13 01:00:01','2015-10-17 01:00:00','2015-11-01 10:00:04',1,NULL,1,1),(6,'个性需不需要刻意追求','个性需要刻意追求',0,0,'个性不需要刻意追求',0,0,0,'2015-10-17 01:00:01','2015-10-21 01:00:00','2015-11-01 10:00:05',1,NULL,1,1),(7,'相处和相爱哪个难','相处容易相爱难',0,0,'相爱容易相处难',0,0,0,'2015-10-21 01:00:01','2015-10-25 01:00:00','2015-11-01 10:00:06',1,NULL,1,1),(8,'成大事者拘不拘小节','成大事者不拘小节',0,0,'成大事者也拘小节',0,0,0,'2015-10-25 01:00:01','2015-10-29 01:00:00','2015-11-01 10:00:07',1,NULL,1,1),(9,'环境保护应该以人为本还是以自然为本','环境保护应该以人为本',0,0,'环境保护应该以自然为本',0,0,0,'2015-10-29 01:00:01','2015-11-01 01:00:00','2015-11-01 10:00:08',1,NULL,1,1),(10,'劳心者和劳力者哪个对社会贡献大','劳心者比劳力者对社会更有贡献',0,0,'劳力者比劳心者对社会更有贡献',0,0,0,'2015-11-01 01:00:01','2015-11-05 01:00:00','2015-11-01 10:00:09',1,NULL,1,1),(11,'天灾和人祸哪个更可怕','天灾比人祸更可怕',0,0,'人祸比天灾更可怕',0,0,0,'2015-11-05 01:00:01','2015-11-09 01:00:00','2015-11-01 10:00:10',1,NULL,1,1),(19,'我是辩题','正方',0,0,'反方',0,0,0,'0000-00-00 00:00:00','0000-00-00 00:00:00','2016-04-16 14:46:59',1,'xxxx',1,1);
/*!40000 ALTER TABLE `T_THESIS` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_USER`
--

DROP TABLE IF EXISTS `T_USER`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_USER` (
  `pk_user_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '用户表编号',
  `user_account` varchar(20) COLLATE utf8_unicode_ci NOT NULL COMMENT '用户账号',
  `user_password` varchar(20) COLLATE utf8_unicode_ci NOT NULL COMMENT '用户密码',
  `user_name` varchar(40) COLLATE utf8_unicode_ci NOT NULL COMMENT '用户昵称',
  `user_age` int(11) DEFAULT '0' COMMENT '用户年龄',
  `user_face_url` varchar(100) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'default.png' COMMENT '用户头像url',
  `user_score` int(11) NOT NULL DEFAULT '0' COMMENT '用户答题得分值',
  `user_exp` int(11) NOT NULL DEFAULT '0' COMMENT '用户经验值',
  `user_register_time` datetime NOT NULL COMMENT '用户注册时间',
  `user_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  PRIMARY KEY (`pk_user_id`)
) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_USER`
--

LOCK TABLES `T_USER` WRITE;
/*!40000 ALTER TABLE `T_USER` DISABLE KEYS */;
INSERT INTO `T_USER` VALUES (1,'18850459301','111111','飞花蝶舞剑2',11,'201604161456141390.jpeg',2,687,'2015-10-01 11:00:00',1),(2,'18850459302','123456','赫夫曼不会浪漫',18,'zcp',15,125,'2015-10-01 16:00:00',1),(3,'18850459330','123456','小吴1258',12,'zcp',19,225,'2015-10-02 17:00:00',1),(4,'18850459304','123456','小龙虾',20,'zcp',15,1050,'2015-10-03 13:00:00',1),(5,'18850459305','123456','Oo冰河葬寒心oO',40,'zcp',14,3200,'2015-10-03 14:00:00',1),(6,'18850459306','123456','kylin',22,'zcp',20,12000,'2015-10-03 15:00:00',1),(7,'18850459307','123456','尤少楼',21,'zcp',20,12253,'2015-10-04 11:00:00',1),(8,'18850459308','123456','骑着麦兜谈恋爱',20,'zcp',14,22332,'2015-10-05 11:00:00',1),(9,'18850459309','123456','天懒少华',20,'zcp',29,6050,'2015-10-06 11:00:00',1),(10,'18850459310','123456','坑娃的爹',22,'zcp',11,3000,'2015-10-10 21:06:00',1),(11,'18850459303','000000','名字',0,'default.png',0,0,'2016-04-16 14:58:52',1);
/*!40000 ALTER TABLE `T_USER` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_USER_COLLECT_BOOK`
--

DROP TABLE IF EXISTS `T_USER_COLLECT_BOOK`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_USER_COLLECT_BOOK` (
  `pk_user_collect_book_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '用户收藏图书表编号',
  `collect_time` datetime NOT NULL COMMENT '记录添加时间',
  `collect_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `fk_ucb_user_id` int(11) NOT NULL COMMENT '用户编号',
  `fk_ucb_book_id` int(11) NOT NULL COMMENT '图书编号',
  PRIMARY KEY (`pk_user_collect_book_id`),
  KEY `fk_T_USER_COLLECT_BOOK_T_USER1_idx` (`fk_ucb_user_id`),
  KEY `fk_T_USER_COLLECT_BOOK_T_BOOK1_idx` (`fk_ucb_book_id`),
  CONSTRAINT `fk_T_USER_COLLECT_BOOK_T_BOOK1` FOREIGN KEY (`fk_ucb_book_id`) REFERENCES `T_BOOK` (`pk_book_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_USER_COLLECT_BOOK_T_USER1` FOREIGN KEY (`fk_ucb_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_USER_COLLECT_BOOK`
--

LOCK TABLES `T_USER_COLLECT_BOOK` WRITE;
/*!40000 ALTER TABLE `T_USER_COLLECT_BOOK` DISABLE KEYS */;
INSERT INTO `T_USER_COLLECT_BOOK` VALUES (1,'2016-04-15 22:13:00',0,1,51),(2,'2016-04-16 14:52:29',1,1,48);
/*!40000 ALTER TABLE `T_USER_COLLECT_BOOK` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_USER_COLLECT_BOOKPOST`
--

DROP TABLE IF EXISTS `T_USER_COLLECT_BOOKPOST`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_USER_COLLECT_BOOKPOST` (
  `pk_user_collect_bookpost_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '用户收藏图书贴表编号',
  `collect_time` datetime NOT NULL COMMENT '记录添加时间',
  `collect_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `fk_ucbp_user_id` int(11) NOT NULL COMMENT '用户编号',
  `fk_ucbp_bookpost_id` int(11) NOT NULL COMMENT '图书帖编号',
  PRIMARY KEY (`pk_user_collect_bookpost_id`),
  KEY `fk_T_USER_COLLECT_BOOKPOST_T_USER1_idx` (`fk_ucbp_user_id`),
  KEY `fk_T_USER_COLLECT_BOOKPOST_T_BOOKPOST1_idx` (`fk_ucbp_bookpost_id`),
  CONSTRAINT `fk_T_USER_COLLECT_BOOKPOST_T_BOOKPOST1` FOREIGN KEY (`fk_ucbp_bookpost_id`) REFERENCES `T_BOOKPOST` (`pk_bookpost_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_USER_COLLECT_BOOKPOST_T_USER1` FOREIGN KEY (`fk_ucbp_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_USER_COLLECT_BOOKPOST`
--

LOCK TABLES `T_USER_COLLECT_BOOKPOST` WRITE;
/*!40000 ALTER TABLE `T_USER_COLLECT_BOOKPOST` DISABLE KEYS */;
INSERT INTO `T_USER_COLLECT_BOOKPOST` VALUES (1,'2016-04-16 14:13:22',1,1,1),(2,'2016-04-16 14:17:19',1,1,15),(3,'2016-04-16 14:41:39',1,1,16);
/*!40000 ALTER TABLE `T_USER_COLLECT_BOOKPOST` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_USER_COLLECT_COUPLET`
--

DROP TABLE IF EXISTS `T_USER_COLLECT_COUPLET`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_USER_COLLECT_COUPLET` (
  `pk_user_collect_couplet_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '用户收藏对联表编号',
  `collect_time` datetime NOT NULL COMMENT '记录添加时间',
  `collect_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `fk_ucc_user_id` int(11) NOT NULL COMMENT '用户编号',
  `fk_ucc_couplet_id` int(11) NOT NULL COMMENT '对联编号',
  PRIMARY KEY (`pk_user_collect_couplet_id`),
  KEY `fk_T_USER_COLLECT_COUPLET_T_USER1_idx` (`fk_ucc_user_id`),
  KEY `fk_T_USER_COLLECT_COUPLET_T_COUPLET1_idx` (`fk_ucc_couplet_id`),
  CONSTRAINT `fk_T_USER_COLLECT_COUPLET_T_COUPLET1` FOREIGN KEY (`fk_ucc_couplet_id`) REFERENCES `T_COUPLET` (`pk_couplet_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_USER_COLLECT_COUPLET_T_USER1` FOREIGN KEY (`fk_ucc_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_USER_COLLECT_COUPLET`
--

LOCK TABLES `T_USER_COLLECT_COUPLET` WRITE;
/*!40000 ALTER TABLE `T_USER_COLLECT_COUPLET` DISABLE KEYS */;
INSERT INTO `T_USER_COLLECT_COUPLET` VALUES (1,'2016-04-16 14:15:54',1,1,26),(2,'2016-04-16 14:45:03',1,1,28);
/*!40000 ALTER TABLE `T_USER_COLLECT_COUPLET` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_USER_COLLECT_QUESTION`
--

DROP TABLE IF EXISTS `T_USER_COLLECT_QUESTION`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_USER_COLLECT_QUESTION` (
  `pk_user_collect_question_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '用户收藏问题表编号',
  `collect_time` datetime NOT NULL COMMENT '记录添加时间',
  `collect_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `fk_ucq_user_id` int(11) NOT NULL COMMENT '用户编号',
  `fk_ucq_question_id` int(11) NOT NULL COMMENT '问题编号',
  PRIMARY KEY (`pk_user_collect_question_id`),
  KEY `fk_T_USER_COLLECT_QUESTION_T_USER1_idx` (`fk_ucq_user_id`),
  KEY `fk_T_USER_COLLECT_QUESTION_T_QUESTION1_idx` (`fk_ucq_question_id`),
  CONSTRAINT `fk_T_USER_COLLECT_QUESTION_T_QUESTION1` FOREIGN KEY (`fk_ucq_question_id`) REFERENCES `T_QUESTION` (`pk_question_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_USER_COLLECT_QUESTION_T_USER1` FOREIGN KEY (`fk_ucq_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_USER_COLLECT_QUESTION`
--

LOCK TABLES `T_USER_COLLECT_QUESTION` WRITE;
/*!40000 ALTER TABLE `T_USER_COLLECT_QUESTION` DISABLE KEYS */;
INSERT INTO `T_USER_COLLECT_QUESTION` VALUES (1,'2016-04-16 14:48:39',1,1,1),(2,'2016-04-16 14:48:41',0,1,2);
/*!40000 ALTER TABLE `T_USER_COLLECT_QUESTION` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_USER_COLLECT_THESIS`
--

DROP TABLE IF EXISTS `T_USER_COLLECT_THESIS`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_USER_COLLECT_THESIS` (
  `pk_user_collect_thesis_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '用户收藏辩题表编号',
  `collect_time` datetime NOT NULL COMMENT '记录添加时间',
  `collect_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `fk_uct_user_id` int(11) NOT NULL COMMENT '用户编号',
  `fk_uct_thesis_id` int(11) NOT NULL COMMENT '辩题编号',
  PRIMARY KEY (`pk_user_collect_thesis_id`),
  KEY `fk_T_USER_COLLECT_THESIS_T_USER1_idx` (`fk_uct_user_id`),
  KEY `fk_T_USER_COLLECT_THESIS_T_THESIS1_idx` (`fk_uct_thesis_id`),
  CONSTRAINT `fk_T_USER_COLLECT_THESIS_T_THESIS1` FOREIGN KEY (`fk_uct_thesis_id`) REFERENCES `T_THESIS` (`pk_thesis_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_USER_COLLECT_THESIS_T_USER1` FOREIGN KEY (`fk_uct_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_USER_COLLECT_THESIS`
--

LOCK TABLES `T_USER_COLLECT_THESIS` WRITE;
/*!40000 ALTER TABLE `T_USER_COLLECT_THESIS` DISABLE KEYS */;
INSERT INTO `T_USER_COLLECT_THESIS` VALUES (1,'2016-04-16 14:07:40',1,1,1);
/*!40000 ALTER TABLE `T_USER_COLLECT_THESIS` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_USER_COLLECT_USER`
--

DROP TABLE IF EXISTS `T_USER_COLLECT_USER`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_USER_COLLECT_USER` (
  `pk_user_collect_user_id` int(11) NOT NULL AUTO_INCREMENT,
  `collect_time` datetime NOT NULL,
  `collect_usable` int(11) NOT NULL DEFAULT '1',
  `fk_ucu_user_id` int(11) NOT NULL,
  `fk_ucu_user_id_collected` int(11) NOT NULL,
  PRIMARY KEY (`pk_user_collect_user_id`),
  KEY `fk_T_USER_COLLECT_USER_idx` (`fk_ucu_user_id`),
  KEY `fk_T_USER_COLLECT_USER_idx1` (`fk_ucu_user_id_collected`),
  CONSTRAINT `fk_T_USER_COLLECT_USER_T_USER1` FOREIGN KEY (`fk_ucu_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_USER_COLLECT_USER_T_USER2` FOREIGN KEY (`fk_ucu_user_id_collected`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_USER_COLLECT_USER`
--

LOCK TABLES `T_USER_COLLECT_USER` WRITE;
/*!40000 ALTER TABLE `T_USER_COLLECT_USER` DISABLE KEYS */;
INSERT INTO `T_USER_COLLECT_USER` VALUES (1,'2016-04-14 00:00:00',1,1,2),(2,'2016-04-15 00:00:00',1,2,1),(3,'2016-04-16 14:54:39',0,1,3);
/*!40000 ALTER TABLE `T_USER_COLLECT_USER` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `T_USER_FOCUS_FIELD`
--

DROP TABLE IF EXISTS `T_USER_FOCUS_FIELD`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `T_USER_FOCUS_FIELD` (
  `pk_user_focus_field_id` int(11) NOT NULL AUTO_INCREMENT COMMENT '用户关注领域表编号',
  `user_focus_field_time` datetime NOT NULL COMMENT '记录添加时间',
  `user_focus_field_usable` int(11) NOT NULL DEFAULT '1' COMMENT '是否可用',
  `fk_user_focus_field_user_id` int(11) NOT NULL COMMENT '用户编号',
  `fk_user_focus_field_field_id` int(11) NOT NULL COMMENT '领域编号',
  PRIMARY KEY (`pk_user_focus_field_id`),
  KEY `fk_T_USER_FIELDS_T_USERS_idx` (`fk_user_focus_field_user_id`),
  KEY `fk_T_USER_FIELDS_T_FIELDS1_idx` (`fk_user_focus_field_field_id`),
  CONSTRAINT `fk_T_USER_FIELDS_T_FIELDS1` FOREIGN KEY (`fk_user_focus_field_field_id`) REFERENCES `T_FIELD` (`pk_field_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_USER_FIELDS_T_USERS` FOREIGN KEY (`fk_user_focus_field_user_id`) REFERENCES `T_USER` (`pk_user_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `T_USER_FOCUS_FIELD`
--

LOCK TABLES `T_USER_FOCUS_FIELD` WRITE;
/*!40000 ALTER TABLE `T_USER_FOCUS_FIELD` DISABLE KEYS */;
INSERT INTO `T_USER_FOCUS_FIELD` VALUES (1,'2016-04-13 21:39:39',1,1,1),(2,'2016-04-13 21:39:39',1,1,4),(3,'2016-04-13 21:39:39',1,1,3);
/*!40000 ALTER TABLE `T_USER_FOCUS_FIELD` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Dumping routines for database 'WenHuiApartment'
--
/*!50003 DROP PROCEDURE IF EXISTS `proc_ArgumentByBelong_Select` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_ArgumentByBelong_Select`(IN `belong` INT, IN `page_index` INT, IN `page_count` INT)
    NO SQL
BEGIN

DECLARE curr_thesis_id int;
DECLARE working_state_id int;
SET working_state_id = (
    SELECT T_STATE.pk_state_id
    FROM T_STATE
    WHERE T_STATE.state_usable = 1 AND T_STATE.state_type = 'Thesis' AND T_STATE.state_value = 2
);
SET curr_thesis_id = (
    SELECT T_THESIS.pk_thesis_id
    FROM T_THESIS
    WHERE T_THESIS.thesis_usable = 1 AND T_THESIS.fk_thesis_state_id = working_state_id
);

SELECT *
FROM T_ARGUMENT
LEFT JOIN T_USER ON T_ARGUMENT.fk_argument_user_id = T_USER.pk_user_id
LEFT JOIN T_STATE ON T_ARGUMENT.fk_argument_state_id = T_STATE.pk_state_id
WHERE T_ARGUMENT.argument_usable = 1 AND T_ARGUMENT.fk_argument_thesis_id = curr_thesis_id AND T_ARGUMENT.argument_belong = belong
ORDER BY T_ARGUMENT.argument_time DESC
LIMIT page_index, page_count;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_Argument_Insert` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_Argument_Insert`(IN `state_value` INT, IN `content` VARCHAR(100) CHARSET utf8, IN `belong` INT, IN `thesis_id` INT, IN `user_id` INT)
    NO SQL
BEGIN
DECLARE anonymous_state_id int;
DECLARE working_state_id int;

SET anonymous_state_id = (
    SELECT T_STATE.pk_state_id
    FROM T_STATE
    WHERE T_STATE.state_usable = 1 AND T_STATE.state_type='Argument' AND T_STATE.state_value=state_value
);

INSERT INTO T_ARGUMENT (argument_content, argument_belong, argument_time, fk_argument_thesis_id, fk_argument_user_id, fk_argument_state_id) VALUES(content, belong, CURRENT_TIMESTAMP, thesis_id, user_id, anonymous_state_id);

IF belong=1 THEN
	UPDATE T_THESIS SET T_THESIS.thesis_pros_reply_number = T_THESIS.thesis_pros_reply_number+1 
    WHERE T_THESIS.thesis_usable=1 AND T_THESIS.pk_thesis_id=thesis_id;
    UPDATE T_USER SET user_exp = user_exp+1 WHERE pk_user_id=user_id;
ELSEIF belong=0 THEN
	UPDATE T_THESIS SET T_THESIS.thesis_cons_reply_number = T_THESIS.thesis_cons_reply_number + 1
    WHERE T_THESIS.thesis_usable=1 AND T_THESIS.pk_thesis_id = thesis_id;
    UPDATE T_USER SET user_exp = user_exp+1 WHERE pk_user_id=user_id;
END IF;
SELECT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_BookReplyByBookID_Select` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_BookReplyByBookID_Select`(IN `book_id` INT, IN `page_index` INT, IN `page_count` INT)
    NO SQL
SELECT *
FROM (
    SELECT *
    FROM T_BOOK_REPLY
    WHERE T_BOOK_REPLY.book_reply_usable = 1 AND T_BOOK_REPLY.fk_br_book_id = book_id
    ORDER BY T_BOOK_REPLY.book_reply_support DESC,  T_BOOK_REPLY.book_reply_time DESC
    LIMIT page_index, page_count
) br
LEFT JOIN (
    SELECT *
    FROM T_USER
    WHERE T_USER.user_usable = 1
) u
ON u.pk_user_id = br.fk_br_user_id ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_BookReply_Insert` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_BookReply_Insert`(IN `content` VARCHAR(40), IN `book_id` INT, IN `user_id` INT)
    NO SQL
BEGIN
INSERT INTO T_BOOK_REPLY(book_reply_content,book_reply_time,fk_br_book_id,fk_br_user_id) 
VALUES(content, CURRENT_TIMESTAMP, book_id, user_id);
UPDATE T_BOOK SET book_comment_count = book_comment_count + 1 WHERE pk_book_id = book_id;
UPDATE T_USER SET user_exp = user_exp+1 WHERE pk_user_id=user_id;
SELECT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_Book_Insert` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_Book_Insert`(IN `name` VARCHAR(100) CHARSET utf8, IN `author` VARCHAR(100) CHARSET utf8, IN `publish_time` VARCHAR(100) CHARSET utf8, IN `cover_url` VARCHAR(100) CHARSET utf8, IN `publisher` VARCHAR(100) CHARSET utf8, IN `summary` TEXT CHARSET utf8, IN `field_id` INT, IN `user_id` INT, IN `statevalue` INT)
    NO SQL
BEGIN
DECLARE state_id int DEFAULT 1;
set state_id = (
    SELECT pk_state_id
    FROM T_STATE
    WHERE state_type = 'Book' AND state_value = statevalue
);
INSERT INTO T_BOOK(book_name,book_author,book_publish_time,book_cover_url,book_publisher,book_summary,book_time,fk_book_field_id,fk_book_user_id,fk_book_state_id)
VALUES(name, author, publish_time, cover_url, publisher, summary, CURRENT_TIMESTAMP, field_id, user_id, state_id);
UPDATE T_USER SET user_exp = user_exp+5 WHERE pk_user_id=user_id;

SELECT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_Book_SelectByMultiCondition` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_Book_SelectByMultiCondition`(IN `search_text` VARCHAR(40), IN `sort_method` INT, IN `field_id` INT, IN `page_index` INT, IN `page_count` INT)
    NO SQL
BEGIN
CREATE TEMPORARY TABLE temp_table (
  SELECT * FROM (
    SELECT * FROM T_BOOK
    WHERE T_BOOK.book_usable = 1 AND T_BOOK.fk_book_state_id = 12 AND (T_BOOK.book_name LIKE search_text OR T_BOOK.book_author LIKE search_text OR T_BOOK.book_publisher LIKE search_text)
  ) b
  LEFT JOIN (SELECT * FROM T_USER WHERE T_USER.user_usable = 1) u ON b.fk_book_user_id = u.pk_user_id
  LEFT JOIN (SELECT * FROM T_FIELD WHERE T_FIELD.field_usable = 1) f ON b.fk_book_field_id = f.pk_field_id
);

IF sort_method = 0 THEN
  IF field_id = 0 THEN
    SELECT * FROM temp_table
    ORDER BY temp_table.book_time DESC
    LIMIT page_index, page_count;
  ELSE
    SELECT * FROM temp_table
    WHERE temp_table.fk_book_field_id = field_id
    ORDER BY temp_table.book_time DESC
    LIMIT page_index, page_count;
  END IF;
ELSEIF sort_method = 1 THEN
  IF field_id = 0 THEN
    SELECT * FROM temp_table
    ORDER BY temp_table.book_collect_number DESC 
    LIMIT page_index, page_count;
  ELSE
    SELECT * FROM temp_table
    WHERE temp_table.fk_book_field_id = field_id
    ORDER BY temp_table.book_collect_number DESC 
    LIMIT page_index, page_count;
  END IF;
ELSEIF sort_method = 2 THEN
  IF field_id = 0 THEN
    SELECT * FROM temp_table
    ORDER BY temp_table.book_comment_count DESC
    LIMIT page_index, page_count;
  ELSE
    SELECT * FROM temp_table
    WHERE temp_table.fk_book_field_id = field_id
    ORDER BY temp_table.book_comment_count DESC
    LIMIT page_index, page_count;
  END IF;
END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_BpCommentByBookpostID_Select` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_BpCommentByBookpostID_Select`(IN `bookpost_id` INT, IN `page_index` INT, IN `page_count` INT)
    NO SQL
SELECT *
FROM (
    SELECT *
    FROM T_BOOKPOST_COMMENT
    WHERE T_BOOKPOST_COMMENT.comment_usable = 1 AND T_BOOKPOST_COMMENT.fk_bpc_bp_id = bookpost_id
    ORDER BY T_BOOKPOST_COMMENT.comment_support DESC,  T_BOOKPOST_COMMENT.comment_time DESC
    LIMIT page_index, page_count
) bpc
LEFT JOIN (
    SELECT *
    FROM T_USER
    WHERE T_USER.user_usable = 1
) u
ON u.pk_user_id = bpc.fk_bpc_user_id ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_BpCommentReplyByCommentID_Select` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_BpCommentReplyByCommentID_Select`(IN `comment_id` INT, IN `page_index` INT, IN `page_count` INT)
    NO SQL
SELECT *
FROM (
    SELECT *
    FROM T_BOOKPOST_COMMENT_REPLY
    WHERE T_BOOKPOST_COMMENT_REPLY.reply_usable = 1 AND T_BOOKPOST_COMMENT_REPLY.fk_bpcr_bpc_id = comment_id
    ORDER BY T_BOOKPOST_COMMENT_REPLY.reply_time DESC
    LIMIT page_index, page_count
) bpcr
LEFT JOIN (
    SELECT *
    FROM T_USER
    WHERE T_USER.user_usable = 1
) u
ON u.pk_user_id = bpcr.fk_bpcr_user_id
LEFT JOIN (
    SELECT pk_user_id pk_user_id_receiver, user_name user_name_receiver
    FROM T_USER
    WHERE T_USER.user_usable = 1
) receiver
ON receiver.pk_user_id_receiver = bpcr.fk_bpcr_user_id_receiver ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_BpCommentReply_Insert` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_BpCommentReply_Insert`(IN `content` VARCHAR(1000), IN `is_reply_author` INT, IN `comment_id` INT, IN `user_id` INT, IN `receiver_id` INT)
    NO SQL
BEGIN
INSERT INTO T_BOOKPOST_COMMENT_REPLY(reply_content, reply_time, reply_isreply_author, fk_bpcr_user_id, fk_bpcr_user_id_receiver, fk_bpcr_bpc_id)
VALUES(content, CURRENT_TIMESTAMP, is_reply_author, user_id, receiver_id, comment_id);
UPDATE T_USER SET user_exp = user_exp+5 WHERE pk_user_id=user_id;
UPDATE T_BOOKPOST_COMMENT SET comment_reply_number = comment_reply_number + 1 WHERE pk_bookpost_comment_id = comment_id;
SELECT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_BpComment_Insert` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_BpComment_Insert`(IN `content` VARCHAR(2000), IN `bookpost_id` INT, IN `user_id` INT)
    NO SQL
BEGIN
INSERT INTO T_BOOKPOST_COMMENT(comment_content, comment_time, fk_bpc_user_id, fk_bpc_bp_id)
VALUES(content, CURRENT_TIMESTAMP,user_id, bookpost_id);
UPDATE T_USER SET user_exp = user_exp+5 WHERE pk_user_id=user_id;
UPDATE T_BOOKPOST SET bookpost_reply_number = bookpost_reply_number + 1 WHERE pk_bookpost_id = bookpost_id;

SELECT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_Bp_Insert` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_Bp_Insert`(IN `title` VARCHAR(100), IN `content` VARCHAR(1000), IN `book_name` VARCHAR(100), IN `user_id` INT, IN `field_id` INT)
    NO SQL
BEGIN
INSERT INTO T_BOOKPOST (bookpost_title, bookpost_content, bookpost_book_name, bookpost_time, fk_bp_user_id, fk_bp_field_id) VALUES(title, content, book_name, CURRENT_TIMESTAMP, user_id, field_id);
UPDATE T_USER SET user_exp = user_exp+5 WHERE pk_user_id=user_id;
SELECT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_Bp_SelectByMultiCondition` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_Bp_SelectByMultiCondition`(IN `search_text` VARCHAR(40), IN `sort_method` INT, IN `field_id` INT, IN `page_index` INT, IN `page_count` INT)
    NO SQL
BEGIN
CREATE TEMPORARY TABLE temp_table (
  SELECT * FROM (
    SELECT * FROM (
      SELECT * FROM T_BOOKPOST
      WHERE T_BOOKPOST.bookpost_usable = 1
    ) bpt
    LEFT JOIN (SELECT * FROM T_USER WHERE T_USER.user_usable = 1) u ON bpt.fk_bp_user_id = u.pk_user_id
    LEFT JOIN (SELECT * FROM T_FIELD WHERE T_FIELD.field_usable = 1) f ON bpt.fk_bp_field_id = f.pk_field_id
  ) bp
  WHERE bp.bookpost_book_name LIKE search_text OR bp.bookpost_title LIKE search_text
);

IF sort_method = 0 THEN
  IF field_id = 0 THEN
    SELECT * FROM temp_table
    ORDER BY temp_table.bookpost_time DESC
    LIMIT page_index, page_count;
  ELSE
    SELECT * FROM temp_table
    WHERE temp_table.fk_bp_field_id = field_id
    ORDER BY temp_table.bookpost_time DESC
    LIMIT page_index, page_count;
  END IF;
ELSEIF sort_method = 1 THEN
  IF field_id = 0 THEN
    SELECT * FROM temp_table
    ORDER BY temp_table.bookpost_support DESC
    LIMIT page_index, page_count;
  ELSE
    SELECT * FROM temp_table
    WHERE temp_table.fk_bp_field_id = field_id
    ORDER BY temp_table.bookpost_support DESC
    LIMIT page_index, page_count;
  END IF;
END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_CoupletReplyByCoupletID_Select` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_CoupletReplyByCoupletID_Select`(IN `couplet_id` INT, IN `page_index` INT, IN `page_count` INT)
    NO SQL
SELECT *
FROM (
    SELECT *
    FROM T_COUPLET_REPLY
    WHERE T_COUPLET_REPLY.reply_usable = 1 AND T_COUPLET_REPLY.fk_cr_couplet_id = couplet_id
    ORDER BY T_COUPLET_REPLY.reply_support DESC,  T_COUPLET_REPLY.reply_time DESC

    LIMIT page_index, page_count
) cr
LEFT JOIN (
    SELECT *
    FROM T_USER
    WHERE T_USER.user_usable = 1
) u
ON u.pk_user_id = cr.fk_cr_user_id ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_CoupletReply_Insert` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_CoupletReply_Insert`(IN `content` VARCHAR(200) CHARSET utf8, IN `couplet_id` INT, IN `user_id` INT)
    NO SQL
BEGIN
INSERT INTO T_COUPLET_REPLY(reply_content,reply_time,fk_cr_couplet_id,fk_cr_user_id) 
VALUES(content, CURRENT_TIMESTAMP, couplet_id, user_id);
UPDATE T_COUPLET SET couplet_reply_number = couplet_reply_number + 1 WHERE pk_couplet_id = couplet_id;
UPDATE T_USER SET user_exp = user_exp+1 WHERE pk_user_id=user_id;
SELECT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_Couplet_Insert` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_Couplet_Insert`(IN `content` VARCHAR(100) CHARSET utf8, IN `user_id` INT)
    NO SQL
BEGIN
INSERT 
INTO T_COUPLET (couplet_content, couplet_support, couplet_reply_number, couplet_time, fk_couplet_user_id) 

VALUES (content, '0', '0', CURRENT_TIMESTAMP, user_id);
UPDATE T_USER SET user_exp = user_exp+5 WHERE pk_user_id=user_id;

SELECT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_Couplet_SelectByMultiCondition` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_Couplet_SelectByMultiCondition`(IN `sort_method` INT, IN `page_index` INT, IN `page_count` INT)
    NO SQL
BEGIN
CREATE TEMPORARY TABLE temp_table (
  SELECT * FROM (
    SELECT * FROM T_COUPLET
    WHERE T_COUPLET.couplet_usable = 1
  ) c
  LEFT JOIN (SELECT * FROM T_USER WHERE T_USER.user_usable = 1) u ON c.fk_couplet_user_id = u.pk_user_id
);

IF sort_method = 0 THEN
    SELECT * FROM temp_table
    ORDER BY temp_table.couplet_time DESC
    LIMIT page_index, page_count;
ELSEIF sort_method = 1 THEN
    SELECT * FROM temp_table
    ORDER BY temp_table.couplet_support DESC
    LIMIT page_index, page_count;
END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_QuestionByQuestionState_Select` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_QuestionByQuestionState_Select`(IN `state_value` INT, IN `page_count` INT)
    NO SQL
BEGIN

DECLARE state_id INT;
DECLARE question_count INT DEFAULT 0;
SET state_id = (
    SELECT T_STATE.pk_state_id
    FROM T_STATE
    WHERE T_STATE.state_usable=1 AND T_STATE.state_type='Question' AND T_STATE.state_value=state_value
);

SET question_count = (
    SELECT COUNT(*)
    FROM T_QUESTION
    LEFT JOIN T_USER ON T_USER.pk_user_id = T_QUESTION.fk_question_user_id
    WHERE T_QUESTION.question_usable=1 AND T_QUESTION.fk_question_state_id=state_id
    ORDER BY T_QUESTION.question_time ASC
    LIMIT 0,page_count
);

IF question_count>=page_count THEN
SELECT *
FROM T_QUESTION
LEFT JOIN T_USER ON T_USER.pk_user_id = T_QUESTION.fk_question_user_id
WHERE T_QUESTION.question_usable=1 AND T_QUESTION.fk_question_state_id=state_id
ORDER BY T_QUESTION.question_time ASC
LIMIT 0,page_count;
END IF;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_Question_Insert` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_Question_Insert`(IN `content` LONGTEXT CHARSET utf8, IN `option_one` LONGTEXT CHARSET utf8, IN `option_two` LONGTEXT CHARSET utf8, IN `option_three` LONGTEXT CHARSET utf8, IN `answer` LONGTEXT CHARSET utf8, IN `show_order` LONGTEXT CHARSET utf8, IN `user_id` INT)
    NO SQL
BEGIN
DECLARE state_id int;
SET state_id = (
    SELECT pk_state_id
    FROM T_STATE
    WHERE T_STATE.state_usable=1 AND T_STATE.state_type='Question' AND T_STATE.state_value=0
);

INSERT INTO T_QUESTION(question_content, question_option_one, question_option_two, question_option_three, question_answer, question_show_order, question_time, fk_question_user_id, fk_question_state_id)
VALUES(content, option_one, option_two, option_three, answer, show_order, CURRENT_TIMESTAMP, user_id, state_id);

UPDATE T_USER SET user_exp = user_exp+5 WHERE pk_user_id=user_id;

SELECT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_ThesisByThesisState_Select` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_ThesisByThesisState_Select`()
    NO SQL
BEGIN
DECLARE workingStateId int;
SET workingStateId = (
    SELECT T_STATE.pk_state_id
    FROM T_STATE
    WHERE T_STATE.state_usable = 1 AND T_STATE.state_type = 'Thesis' AND T_STATE.state_value = 2
);
SELECT *
FROM (
    SELECT *
    FROM T_THESIS
    WHERE T_THESIS.thesis_usable = 1 AND T_THESIS.fk_thesis_state_id = workingStateId
)t
LEFT JOIN T_STATE
ON T_STATE.pk_state_id = t.fk_thesis_state_id;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_Thesis_Insert` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_Thesis_Insert`(IN `content` VARCHAR(100) CHARSET utf8, IN `pros` VARCHAR(100) CHARSET utf8, IN `cons` VARCHAR(100) CHARSET utf8, IN `add_reson` VARCHAR(100) CHARSET utf8, IN `statevalue` INT, IN `user_id` INT)
    NO SQL
BEGIN
DECLARE state_id int DEFAULT 1;
set state_id = (
    SELECT pk_state_id
    FROM T_STATE
    WHERE state_type = 'Thesis' AND state_value = statevalue
);
INSERT INTO T_THESIS(thesis_content,thesis_pros,thesis_cons,thesis_time,thesis_add_reson,fk_thesis_state_id, fk_thesis_user_id)
VALUES(content, pros, cons, CURRENT_TIMESTAMP, add_reson,state_id, user_id);
UPDATE T_USER SET user_exp = user_exp+5 WHERE pk_user_id=user_id;

SELECT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserByAccount_Select` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserByAccount_Select`(IN `account` LONGTEXT)
    NO SQL
BEGIN
SELECT * FROM (
    SELECT * FROM T_USER
	WHERE T_USER.user_account = account
) u
LEFT JOIN T_LEVELS
ON u.user_exp BETWEEN T_LEVELS.level_min_exp AND T_LEVELS.level_max_exp;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserByHeadURL_Update` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserByHeadURL_Update`(IN `head_url` VARCHAR(50), IN `user_id` INT)
    NO SQL
BEGIN
UPDATE T_USER
SET user_face_url = head_url
WHERE pk_user_id=user_id;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserByUserID_Select` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserByUserID_Select`(IN `user_id` INT)
    NO SQL
BEGIN
SELECT * FROM (
    SELECT * FROM T_USER
	WHERE T_USER.pk_user_id = user_id
) u
LEFT JOIN T_LEVELS
ON u.user_exp BETWEEN T_LEVELS.level_min_exp AND T_LEVELS.level_max_exp;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserCollectBookByBookIDUserID_InsertOrDelete` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserCollectBookByBookIDUserID_InsertOrDelete`(IN `user_id` INT, IN `book_id` INT, IN `curr_collected` INT)
    NO SQL
BEGIN
DECLARE is_exist INT DEFAULT 0;
SET is_exist = (
    SELECT COUNT(*)
    FROM T_USER_COLLECT_BOOK ucb
    WHERE ucb.fk_ucb_user_id = user_id AND ucb.fk_ucb_book_id = book_id
);
IF is_exist=0 THEN
    INSERT INTO T_USER_COLLECT_BOOK(collect_time, collect_usable, fk_ucb_user_id, fk_ucb_book_id) VALUES (CURRENT_TIMESTAMP, '1', user_id, book_id);
    UPDATE T_BOOK SET book_collect_number = book_collect_number + 1 WHERE pk_book_id=book_id;
END IF;
IF is_exist=1 AND curr_collected=0 THEN
  UPDATE T_USER_COLLECT_BOOK SET collect_usable=1 WHERE fk_ucb_user_id = user_id AND fk_ucb_book_id = book_id;
    UPDATE T_BOOK SET book_collect_number = book_collect_number + 1 WHERE pk_book_id=book_id;
END IF;
IF is_exist=1 AND curr_collected=1 THEN
    UPDATE T_USER_COLLECT_BOOK SET collect_usable=0  WHERE fk_ucb_user_id = user_id AND fk_ucb_book_id = book_id;
    UPDATE T_BOOK SET book_collect_number = book_collect_number - 1 WHERE pk_book_id=book_id;
END IF;
SELECT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserCollectBookByBookIDUserID_Select` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserCollectBookByBookIDUserID_Select`(IN `book_id` INT, IN `user_id` INT)
    NO SQL
    COMMENT '检查是否收藏'
SELECT *
FROM T_USER_COLLECT_BOOK
WHERE T_USER_COLLECT_BOOK.fk_ucb_user_id = user_id AND T_USER_COLLECT_BOOK.fk_ucb_book_id = book_id AND T_USER_COLLECT_BOOK.collect_usable = 1 ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserCollectBpByBookpostIDUserID_InsertOrDelete` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserCollectBpByBookpostIDUserID_InsertOrDelete`(IN `bookpost_id` INT, IN `user_id` INT, IN `curr_collected` INT)
    NO SQL
BEGIN
DECLARE is_exist INT DEFAULT 0;
SET is_exist = (
    SELECT COUNT(*)
    FROM T_USER_COLLECT_BOOKPOST ucbp
    WHERE ucbp.fk_ucbp_user_id = user_id AND ucbp.fk_ucbp_bookpost_id = bookpost_id
);

IF is_exist=0 THEN
    INSERT INTO T_USER_COLLECT_BOOKPOST(collect_time, collect_usable, fk_ucbp_user_id, fk_ucbp_bookpost_id) VALUES (CURRENT_TIMESTAMP, '1', user_id, bookpost_id);
    UPDATE T_BOOKPOST SET bookpost_collect_number = bookpost_collect_number + 1 WHERE pk_bookpost_id=bookpost_id;
END IF;
IF is_exist=1 AND curr_collected=0 THEN
  UPDATE T_USER_COLLECT_BOOKPOST SET collect_usable=1 WHERE fk_ucbp_user_id = user_id AND fk_ucbp_bookpost_id = bookpost_id;
    UPDATE T_BOOKPOST SET bookpost_collect_number = bookpost_collect_number + 1 WHERE pk_bookpost_id=bookpost_id;
END IF;
IF is_exist=1 AND curr_collected=1 THEN
    UPDATE T_USER_COLLECT_BOOKPOST SET collect_usable=0  WHERE fk_ucbp_user_id = user_id AND fk_ucbp_bookpost_id = bookpost_id;
    UPDATE T_BOOKPOST SET bookpost_collect_number = bookpost_collect_number - 1 WHERE pk_bookpost_id=bookpost_id;
END IF;
SELECT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserCollectBpByBookpostIDUserID_Select` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserCollectBpByBookpostIDUserID_Select`(IN `bookpost_id` INT, IN `user_id` INT)
    NO SQL
SELECT *
FROM T_USER_COLLECT_BOOKPOST
WHERE T_USER_COLLECT_BOOKPOST.fk_ucbp_user_id = user_id AND
T_USER_COLLECT_BOOKPOST.fk_ucbp_bookpost_id = bookpost_id AND T_USER_COLLECT_BOOKPOST.collect_usable = 1 ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserCollectCoupletByCoupletIDUserID_InsertOrDelete` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserCollectCoupletByCoupletIDUserID_InsertOrDelete`(IN `couplet_id` INT, IN `user_id` INT, IN `curr_collected` INT)
BEGIN
DECLARE is_exist INT DEFAULT 0;
SET is_exist = (
    SELECT COUNT(*)
    FROM T_USER_COLLECT_COUPLET ucc
    WHERE ucc.fk_ucc_user_id = user_id AND ucc.fk_ucc_couplet_id = couplet_id
);

IF is_exist=0 THEN
    INSERT INTO T_USER_COLLECT_COUPLET(collect_time, collect_usable, fk_ucc_user_id, fk_ucc_couplet_id) VALUES (CURRENT_TIMESTAMP, '1', user_id, couplet_id);
    UPDATE T_COUPLET SET couplet_collect_number = couplet_collect_number + 1 WHERE pk_couplet_id=couplet_id;
END IF;
IF is_exist=1 AND curr_collected=0 THEN
	UPDATE T_USER_COLLECT_COUPLET SET collect_usable=1 WHERE fk_ucc_user_id = user_id AND fk_ucc_couplet_id = couplet_id;
    UPDATE T_COUPLET SET couplet_collect_number = couplet_collect_number + 1 WHERE pk_couplet_id=couplet_id;
END IF;
IF is_exist=1 AND curr_collected=1 THEN
    UPDATE T_USER_COLLECT_COUPLET SET collect_usable=0  WHERE fk_ucc_user_id = user_id AND fk_ucc_couplet_id = couplet_id;
    UPDATE T_COUPLET SET couplet_collect_number = couplet_collect_number - 1 WHERE pk_couplet_id=couplet_id;
END IF;
SELECT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserCollectCoupletByCoupletIDUserID_Select` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserCollectCoupletByCoupletIDUserID_Select`(IN `couplet_id` INT, IN `user_id` INT)
    NO SQL
SELECT *
FROM T_USER_COLLECT_COUPLET ucc
WHERE ucc.collect_usable = 1 AND ucc.fk_ucc_couplet_id = couplet_id AND ucc.fk_ucc_user_id = user_id ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserCollectQuestionByQuestionIDUserID_InsertOrDelete` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserCollectQuestionByQuestionIDUserID_InsertOrDelete`(IN `question_id` INT, IN `user_id` INT, IN `curr_collected` INT)
    NO SQL
BEGIN
DECLARE is_exist INT DEFAULT 0;
SET is_exist = (
    SELECT COUNT(*)
    FROM T_USER_COLLECT_QUESTION
    WHERE fk_ucq_user_id = user_id AND fk_ucq_question_id = question_id
);

IF is_exist=0 THEN
	INSERT INTO T_USER_COLLECT_QUESTION(collect_time, collect_usable, fk_ucq_user_id, fk_ucq_question_id) VALUES (CURRENT_TIMESTAMP, '1', user_id, question_id);
    UPDATE T_QUESTION SET question_collect_number = question_collect_number + 1 WHERE pk_question_id = question_id;
END IF;
IF is_exist=1 AND curr_collected=0 THEN
	UPDATE T_USER_COLLECT_QUESTION SET collect_usable = 1 WHERE fk_ucq_user_id = user_id AND fk_ucq_question_id = question_id;
	UPDATE T_QUESTION SET question_collect_number = question_collect_number + 1 WHERE pk_question_id = question_id;
END IF;
IF is_exist=1 AND curr_collected=1 THEN
	UPDATE T_USER_COLLECT_QUESTION SET collect_usable = 0 WHERE fk_ucq_user_id = user_id AND fk_ucq_question_id = question_id;
	UPDATE T_QUESTION SET question_collect_number = question_collect_number - 1 WHERE pk_question_id = question_id;
END IF;
SELECT 1;
end ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserCollectQuestionByQuestionIDUserID_Select` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserCollectQuestionByQuestionIDUserID_Select`(IN `question_id` INT, IN `user_id` INT)
    NO SQL
SELECT *
FROM T_USER_COLLECT_QUESTION ucq
WHERE ucq.collect_usable = 1 AND ucq.fk_ucq_question_id = question_id AND ucq.fk_ucq_user_id = user_id ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserCollectThesisByThesisIDUserID_InsertOrDelete` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserCollectThesisByThesisIDUserID_InsertOrDelete`(IN `thesis_id` INT, IN `user_id` INT, IN `curr_collected` INT)
    NO SQL
BEGIN
DECLARE is_exist INT DEFAULT 0;
SET is_exist = (
    SELECT COUNT(*)
    FROM T_USER_COLLECT_THESIS
    WHERE fk_uct_user_id = user_id AND fk_uct_thesis_id = thesis_id
);

IF is_exist=0 THEN
	INSERT INTO T_USER_COLLECT_THESIS(collect_time, collect_usable, fk_uct_user_id, fk_uct_thesis_id) VALUES (CURRENT_TIMESTAMP, '1', user_id, thesis_id);
    UPDATE T_THESIS SET thesis_collect_number = thesis_collect_number + 1 WHERE pk_thesis_id = thesis_id;
END IF;
IF is_exist=1 AND curr_collected=0 THEN
	UPDATE T_USER_COLLECT_THESIS SET collect_usable = 1 WHERE fk_uct_thesis_id = thesis_id AND fk_uct_user_id = user_id;
	UPDATE T_THESIS SET thesis_collect_number = thesis_collect_number + 1 WHERE pk_thesis_id = thesis_id;
END IF;
IF is_exist=1 AND curr_collected=1 THEN
	UPDATE T_USER_COLLECT_THESIS SET collect_usable = 0 WHERE fk_uct_thesis_id = thesis_id AND fk_uct_user_id = user_id;
	UPDATE T_THESIS SET thesis_collect_number = thesis_collect_number - 1 WHERE pk_thesis_id = thesis_id;
END IF;
SELECT 1;
end ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserCollectThesisBythesisIDUserID_Select` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserCollectThesisBythesisIDUserID_Select`(IN `thesis_id` INT, IN `user_id` INT)
    NO SQL
SELECT *
FROM T_USER_COLLECT_THESIS uct
WHERE uct.collect_usable = 1 AND uct.fk_uct_thesis_id = thesis_id AND uct.fk_uct_user_id = user_id ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserCollectUserByUserIDCollectedUserID_InsertOrDelete` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserCollectUserByUserIDCollectedUserID_InsertOrDelete`(IN `collected_user_id` INT, IN `user_id` INT, IN `curr_collected` INT)
    NO SQL
BEGIN
DECLARE is_exist INT DEFAULT 0;
SET is_exist = (
    SELECT COUNT(*)
    FROM T_USER_COLLECT_USER
    WHERE T_USER_COLLECT_USER.fk_ucu_user_id = user_id AND T_USER_COLLECT_USER.fk_ucu_user_id_collected = collected_user_id
);

IF is_exist=0 THEN
	INSERT INTO T_USER_COLLECT_USER(collect_time , fk_ucu_user_id , fk_ucu_user_id_collected )
VALUES (CURRENT_TIMESTAMP, user_id, collected_user_id);
END IF;
IF is_exist=1 AND curr_collected=0 THEN
	UPDATE T_USER_COLLECT_USER SET collect_usable  = 1 WHERE fk_ucu_user_id = user_id AND fk_ucu_user_id_collected = collected_user_id;
END IF;
IF is_exist=1 AND curr_collected=1 THEN
	UPDATE T_USER_COLLECT_USER SET collect_usable  = 0 WHERE fk_ucu_user_id = user_id AND fk_ucu_user_id_collected = collected_user_id;
END IF;
SELECT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserCollectUser_Select` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserCollectUser_Select`(IN `user_id` INT, IN `page_index` INT, IN `page_count` INT)
    NO SQL
SELECT *
FROM (
    SELECT * 
    FROM (
        SELECT fk_ucu_user_id_collected
        FROM T_USER_COLLECT_USER
        WHERE fk_ucu_user_id = user_id AND collect_usable = 1
        ORDER BY collect_time DESC
        LIMIT page_index, page_count
    ) ucu
    LEFT JOIN T_USER
    ON T_USER.pk_user_id = ucu.fk_ucu_user_id_collected
)ucu
LEFT JOIN T_LEVELS
ON ucu.user_exp BETWEEN T_LEVELS.level_min_exp AND T_LEVELS.level_max_exp ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserFocusFieldByUserID_Select` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserFocusFieldByUserID_Select`(IN `user_id` INT)
    NO SQL
BEGIN

SELECT * FROM (
    SELECT * FROM T_USER_FOCUS_FIELD
	WHERE fk_user_focus_field_user_id = user_id
) uff
LEFT JOIN T_FIELD 
ON T_FIELD.pk_field_id = uff.fk_user_focus_field_field_id;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserSupportArgumentByArgumentIDUserID_InsertOrDelete` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserSupportArgumentByArgumentIDUserID_InsertOrDelete`(IN `argument_id` INT, IN `user_id` INT, IN `curr_supported` INT)
    NO SQL
BEGIN
DECLARE is_exist INT DEFAULT 0;
SET is_exist = (
    SELECT COUNT(*)
    FROM T_ARGUMENT_SUP_RECORD
    WHERE fk_argument_sup_record_argument_id = argument_id AND fk_argument_sup_record_user_id = user_id
);

IF is_exist=0 THEN
	INSERT INTO T_ARGUMENT_SUP_RECORD(support_record_time, fk_argument_sup_record_argument_id, fk_argument_sup_record_user_id)
VALUES (CURRENT_TIMESTAMP, argument_id, user_id);
	UPDATE T_ARGUMENT SET T_ARGUMENT.argument_support = argument_support + 1 WHERE pk_argument_id = argument_id;
END IF;
IF is_exist=1 AND curr_supported=0 THEN
	UPDATE T_ARGUMENT_SUP_RECORD SET support_record_usable = 1 WHERE fk_argument_sup_record_argument_id = argument_id AND fk_argument_sup_record_user_id = user_id;
	UPDATE T_ARGUMENT SET argument_support = argument_support + 1 WHERE pk_argument_id = argument_id;
END IF;
IF is_exist=1 AND curr_supported=1 THEN
	UPDATE T_ARGUMENT_SUP_RECORD SET support_record_usable = 0 WHERE fk_argument_sup_record_argument_id = argument_id AND fk_argument_sup_record_user_id = user_id;
	UPDATE T_ARGUMENT SET T_ARGUMENT.argument_support = argument_support - 1 WHERE pk_argument_id = argument_id;
END IF;
SELECT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserSupportArgumentByArgumentIDUserID_Select` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserSupportArgumentByArgumentIDUserID_Select`(IN `argument_id` INT, IN `user_id` INT)
    NO SQL
SELECT *
FROM T_ARGUMENT_SUP_RECORD t
WHERE t.support_record_usable = 1 AND t.fk_argument_sup_record_argument_id = argument_id AND t.fk_argument_sup_record_user_id = user_id ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserSupportBookReplyByReplyIDUserID_InsertOrDelete` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserSupportBookReplyByReplyIDUserID_InsertOrDelete`(IN `reply_id` INT, IN `user_id` INT, IN `curr_supported` INT)
    NO SQL
BEGIN
DECLARE is_exist INT DEFAULT 0;
SET is_exist = (
    SELECT COUNT(*)
    FROM T_BOOK_REPLY_SUP_RECORD
    WHERE T_BOOK_REPLY_SUP_RECORD.fk_br_sup_record_br_id = reply_id AND T_BOOK_REPLY_SUP_RECORD.fk_br_sup_record_user_id = user_id
);

IF is_exist=0 THEN
	INSERT INTO T_BOOK_REPLY_SUP_RECORD(support_record_time, fk_br_sup_record_br_id, fk_br_sup_record_user_id)
VALUES (CURRENT_TIMESTAMP, reply_id, user_id);
	UPDATE T_BOOK_REPLY SET book_reply_support = book_reply_support + 1 WHERE pk_book_reply_id = reply_id;
END IF;
IF is_exist=1 AND curr_supported=0 THEN
	UPDATE T_BOOK_REPLY_SUP_RECORD SET support_record_usable = 1 WHERE fk_br_sup_record_br_id = reply_id AND fk_br_sup_record_user_id = user_id;
	UPDATE T_BOOK_REPLY SET book_reply_support = book_reply_support + 1 WHERE pk_book_reply_id = reply_id;
END IF;
IF is_exist=1 AND curr_supported=1 THEN
	UPDATE T_BOOK_REPLY_SUP_RECORD SET support_record_usable = 0 WHERE fk_br_sup_record_br_id = reply_id AND fk_br_sup_record_user_id = user_id;
	UPDATE T_BOOK_REPLY SET book_reply_support = book_reply_support - 1 WHERE pk_book_reply_id = reply_id;
END IF;
SELECT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserSupportBookReplyByReplyIDUserID_Select` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserSupportBookReplyByReplyIDUserID_Select`(IN `reply_id` INT, IN `user_id` INT)
    NO SQL
SELECT *
FROM T_BOOK_REPLY_SUP_RECORD t
WHERE t.support_record_usable = 1 AND t.fk_br_sup_record_br_id = reply_id AND t.fk_br_sup_record_user_id = user_id ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserSupportBpByBookpostIDUserID_InsertOrDelete` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserSupportBpByBookpostIDUserID_InsertOrDelete`(IN `bookpost_id` INT, IN `user_id` INT, IN `curr_supported` INT)
    NO SQL
BEGIN
DECLARE is_exist INT DEFAULT 0;
SET is_exist = (
    SELECT COUNT(*)
    FROM T_BOOKPOST_SUP_RECORD
    WHERE T_BOOKPOST_SUP_RECORD.fk_bp_sup_record_bp_id = bookpost_id AND T_BOOKPOST_SUP_RECORD.fk_bp_sup_record_user_id = user_id
);

IF is_exist=0 THEN
	INSERT INTO T_BOOKPOST_SUP_RECORD(support_record_time, fk_bp_sup_record_bp_id, fk_bp_sup_record_user_id)
VALUES (CURRENT_TIMESTAMP, bookpost_id, user_id);
	UPDATE T_BOOKPOST SET bookpost_support = bookpost_support + 1 WHERE pk_bookpost_id = bookpost_id;
END IF;
IF is_exist=1 AND curr_supported=0 THEN
	UPDATE T_BOOKPOST_SUP_RECORD SET support_record_usable = 1 WHERE fk_bp_sup_record_bp_id = bookpost_id AND fk_bp_sup_record_user_id = user_id;
	UPDATE T_BOOKPOST SET bookpost_support = bookpost_support + 1 WHERE pk_bookpost_id = bookpost_id;
END IF;
IF is_exist=1 AND curr_supported=1 THEN
	UPDATE T_BOOKPOST_SUP_RECORD SET support_record_usable = 0 WHERE fk_bp_sup_record_bp_id = bookpost_id AND fk_bp_sup_record_user_id = user_id;
	UPDATE T_BOOKPOST SET bookpost_support = bookpost_support - 1 WHERE pk_bookpost_id = bookpost_id;
END IF;
SELECT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserSupportBpByBookpostIDUserID_Select` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserSupportBpByBookpostIDUserID_Select`(IN `bookpost_id` INT, IN `user_id` INT)
    NO SQL
SELECT *
FROM T_BOOKPOST_SUP_RECORD t
WHERE t.support_record_usable = 1 AND t.fk_bp_sup_record_bp_id = bookpost_id AND t.fk_bp_sup_record_user_id = user_id ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserSupportBpCommentByCommentIDUserID_InsertOrDelete` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserSupportBpCommentByCommentIDUserID_InsertOrDelete`(IN `comment_id` INT, IN `user_id` INT, IN `curr_supported` INT)
    NO SQL
BEGIN
DECLARE is_exist INT DEFAULT 0;
SET is_exist = (
    SELECT COUNT(*)
    FROM T_BOOKPOST_COMMENT_SUP_RECORD
    WHERE fk_bpc_sup_record_user_id = user_id AND fk_bpc_sup_record_bpc_id = comment_id
);

IF is_exist=0 THEN
    INSERT INTO T_BOOKPOST_COMMENT_SUP_RECORD(support_record_time , support_record_usable , fk_bpc_sup_record_user_id , fk_bpc_sup_record_bpc_id ) VALUES (CURRENT_TIMESTAMP, '1', user_id, comment_id);
    UPDATE T_BOOKPOST_COMMENT SET comment_support = comment_support + 1 WHERE pk_bookpost_comment_id=comment_id;
END IF;
IF is_exist=1 AND curr_supported=0 THEN
  UPDATE T_BOOKPOST_COMMENT_SUP_RECORD SET support_record_usable=1 WHERE fk_bpc_sup_record_user_id = user_id AND fk_bpc_sup_record_bpc_id = comment_id;
    UPDATE T_BOOKPOST_COMMENT SET comment_support = comment_support + 1 WHERE pk_bookpost_comment_id=comment_id;
END IF;
IF is_exist=1 AND curr_supported=1 THEN
    UPDATE T_BOOKPOST_COMMENT_SUP_RECORD SET support_record_usable=0  WHERE fk_bpc_sup_record_user_id = user_id AND fk_bpc_sup_record_bpc_id = comment_id;
    UPDATE T_BOOKPOST_COMMENT SET comment_support = comment_support - 1 WHERE pk_bookpost_comment_id=comment_id;
END IF;
SELECT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserSupportBpCommentByCommentIDUserID_Select` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserSupportBpCommentByCommentIDUserID_Select`(IN `comment_id` INT, IN `user_id` INT)
    NO SQL
SELECT *
FROM T_BOOKPOST_COMMENT_SUP_RECORD t
WHERE t.support_record_usable = 1 AND t.fk_bpc_sup_record_bpc_id = comment_id AND t.fk_bpc_sup_record_user_id = user_id ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserSupportBpCommentReplyByReplyIDUserID_InsertOrDelete` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserSupportBpCommentReplyByReplyIDUserID_InsertOrDelete`(IN `reply_id` INT, IN `user_id` INT, IN `curr_supported` INT)
    NO SQL
BEGIN
DECLARE is_exist INT DEFAULT 0;
SET is_exist = (
    SELECT COUNT(*)
    FROM T_BOOKPOST_COMMENT_REPLY_SUP_RECORD
    WHERE T_BOOKPOST_COMMENT_REPLY_SUP_RECORD.fk_bpcr_sup_record_user_id = user_id AND T_BOOKPOST_COMMENT_REPLY_SUP_RECORD.fk_bpcr_sup_record_bpcr_id = reply_id
);

IF is_exist=0 THEN
    INSERT INTO T_BOOKPOST_COMMENT_REPLY_SUP_RECORD(support_record_time , support_record_usable , fk_bpcr_sup_record_user_id , fk_bpcr_sup_record_bpcr_id) VALUES (CURRENT_TIMESTAMP, '1', user_id, reply_id);
    UPDATE T_BOOKPOST_COMMENT_REPLY SET reply_support = reply_support + 1 WHERE pk_reply_id=reply_id;
END IF;
IF is_exist=1 AND curr_supported=0 THEN
  UPDATE T_BOOKPOST_COMMENT_REPLY_SUP_RECORD SET support_record_usable=1 WHERE fk_bpcr_sup_record_user_id = user_id AND fk_bpcr_sup_record_bpcr_id = reply_id;
    UPDATE T_BOOKPOST_COMMENT_REPLY SET reply_support = reply_support + 1 WHERE pk_reply_id=reply_id;
END IF;
IF is_exist=1 AND curr_supported=1 THEN
    UPDATE T_BOOKPOST_COMMENT_REPLY_SUP_RECORD SET support_record_usable=0 WHERE fk_bpcr_sup_record_user_id = user_id AND fk_bpcr_sup_record_bpcr_id = reply_id;
    UPDATE T_BOOKPOST_COMMENT_REPLY SET reply_support = reply_support - 1 WHERE pk_reply_id=reply_id;
END IF;
SELECT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserSupportBpCommentReplyByReplyIDUserID_Select` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserSupportBpCommentReplyByReplyIDUserID_Select`(IN `reply_id` INT, IN `user_id` INT)
    NO SQL
SELECT *
FROM T_BOOKPOST_COMMENT_REPLY_SUP_RECORD t
WHERE t.support_record_usable = 1 AND t.fk_bpcr_sup_record_bpcr_id = reply_id AND t.fk_bpcr_sup_record_user_id = user_id ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserSupportCoupletByCoupletIDUserID_InsertOrDelete` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserSupportCoupletByCoupletIDUserID_InsertOrDelete`(IN `couplet_id` INT, IN `user_id` INT, IN `curr_supported` INT)
    NO SQL
BEGIN
DECLARE is_exist INT DEFAULT 0;
SET is_exist = (
    SELECT COUNT(*)
    FROM T_COUPLET_SUP_RECORD csr
    WHERE csr.fk_couplet_sup_record_couplet_id = couplet_id AND csr.fk_couplet_sup_record_user_id = user_id
);

IF is_exist = 0 THEN
	INSERT INTO T_COUPLET_SUP_RECORD(support_record_time, fk_couplet_sup_record_couplet_id, fk_couplet_sup_record_user_id)
	VALUES (CURRENT_TIMESTAMP, couplet_id, user_id);
    UPDATE T_COUPLET SET T_COUPLET.couplet_support = T_COUPLET.couplet_support + 1 WHERE T_COUPLET.pk_couplet_id = couplet_id;
END IF;
IF is_exist = 1 AND curr_supported=0 THEN
	UPDATE T_COUPLET_SUP_RECORD csr SET csr.support_record_usable = 1 WHERE csr.fk_couplet_sup_record_couplet_id = couplet_id AND csr.fk_couplet_sup_record_user_id = user_id;
    UPDATE T_COUPLET SET T_COUPLET.couplet_support = T_COUPLET.couplet_support + 1 WHERE T_COUPLET.pk_couplet_id = couplet_id;
END IF;
IF is_exist = 1 AND curr_supported = 1 THEN
	UPDATE T_COUPLET_SUP_RECORD csr SET csr.support_record_usable = 0 WHERE  csr.fk_couplet_sup_record_couplet_id=couplet_id AND csr.fk_couplet_sup_record_user_id = user_id;
    UPDATE T_COUPLET SET T_COUPLET.couplet_support = T_COUPLET.couplet_support - 1 WHERE T_COUPLET.pk_couplet_id = couplet_id;
END IF;
SELECT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserSupportCoupletByCoupletIDUserID_Select` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserSupportCoupletByCoupletIDUserID_Select`(IN `couplet_id` INT, IN `user_id` INT)
    NO SQL
SELECT *
FROM T_COUPLET_SUP_RECORD t
WHERE t.support_record_usable = 1 AND t.fk_couplet_sup_record_couplet_id = couplet_id AND t.fk_couplet_sup_record_user_id = user_id ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserSupportCoupletReplyByReplyIDUserID_InsertOrDelete` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserSupportCoupletReplyByReplyIDUserID_InsertOrDelete`(IN `reply_id` INT, IN `user_id` INT, IN `curr_supported` INT)
    NO SQL
BEGIN
DECLARE is_exist INT DEFAULT 0;
SET is_exist = (
    SELECT COUNT(*)
    FROM T_COUPLET_REPLY_SUP_RECORD
    WHERE fk_cr_sup_record_cr_id=reply_id AND fk_cr_sup_record_user_id=user_id
);

IF is_exist=0 THEN
	INSERT INTO T_COUPLET_REPLY_SUP_RECORD(support_record_time, fk_cr_sup_record_cr_id, fk_cr_sup_record_user_id) VALUES (CURRENT_TIMESTAMP, reply_id, user_id);
    UPDATE T_COUPLET_REPLY SET reply_support = reply_support + 1 WHERE pk_couplet_reply_id = reply_id;
END IF;
IF is_exist=1 AND curr_supported=0 THEN
	UPDATE T_COUPLET_REPLY_SUP_RECORD SET support_record_usable=1 WHERE fk_cr_sup_record_cr_id = reply_id AND fk_cr_sup_record_user_id = user_id;
	UPDATE T_COUPLET_REPLY SET reply_support = reply_support + 1 WHERE pk_couplet_reply_id = reply_id;
END IF;
IF is_exist=1 AND curr_supported=1 THEN
	UPDATE T_COUPLET_REPLY_SUP_RECORD SET support_record_usable=0 WHERE fk_cr_sup_record_cr_id = reply_id AND fk_cr_sup_record_user_id = user_id;
	UPDATE T_COUPLET_REPLY SET reply_support = reply_support - 1 WHERE pk_couplet_reply_id = reply_id;
END IF;
SELECT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_UserSupportCoupletReplyByReplyIDUserID_Select` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_UserSupportCoupletReplyByReplyIDUserID_Select`(IN `reply_id` INT, IN `user_id` INT)
    NO SQL
SELECT *
FROM T_COUPLET_REPLY_SUP_RECORD t
WHERE t.support_record_usable = 1 AND t.fk_cr_sup_record_cr_id = reply_id AND t.fk_cr_sup_record_user_id = user_id ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_Z_QuestionReplaceNew_Update` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_Z_QuestionReplaceNew_Update`(IN `pageCount` INT)
    NO SQL
BEGIN
DECLARE readyStateId INT;
DECLARE workingStateId INT;
DECLARE endStateId INT;
DECLARE readyCount INT DEFAULT 0;

SET readyStateId = (
    SELECT T_STATE.pk_state_id
    FROM T_STATE
    WHERE state_type='Question' AND state_value=1
    LIMIT 0,1
);
SET workingStateId = (
    SELECT T_STATE.pk_state_id
    FROM T_STATE
    WHERE state_type='Question' AND state_value=2
    LIMIT 0,1
);
SET endStateId = (
    SELECT T_STATE.pk_state_id
    FROM T_STATE
    WHERE state_type='Question' AND state_value=3
    LIMIT 0,1
);
SET readyCount = (
    SELECT COUNT(*)
    FROM T_QUESTION
    WHERE question_usable=1 AND fk_question_state_id=readyStateId
);

IF readyCount >= pageCount THEN
UPDATE T_QUESTION SET fk_question_state_id=endStateId WHERE fk_question_state_id=workingStateId;

UPDATE T_QUESTION q, (
    SELECT *
    FROM T_QUESTION
    WHERE question_usable=1 AND fk_question_state_id=readyStateId
   	ORDER BY question_time DESC
    LIMIT 0,pageCount
)temp SET q.fk_question_state_id=workingStateId WHERE q.pk_question_id=temp.pk_question_id;
END IF;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `proc_Z_ThesisReplaceNew_Update` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_unicode_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = '' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_Z_ThesisReplaceNew_Update`()
    NO SQL
BEGIN

DECLARE currThesisId int;
DECLARE nextThesisId int;
DECLARE readyStateId int;
DECLARE workingStateId int;
DECLARE endStateId int;

SET readyStateId = (
	SELECT T_STATE.pk_state_id
	FROM T_STATE
	WHERE T_STATE.state_usable=1 AND T_STATE.state_type='Thesis' AND T_STATE.state_value=1
);
SET workingStateId = (
	SELECT T_STATE.pk_state_id
	FROM T_STATE
	WHERE T_STATE.state_usable=1 AND T_STATE.state_type='Thesis' AND T_STATE.state_value=2
);
SET endStateId = (
	SELECT T_STATE.pk_state_id
	FROM T_STATE
	WHERE T_STATE.state_usable=1 AND T_STATE.state_type='Thesis' AND T_STATE.state_value=3
);

SET currThesisId = (
    SELECT T_THESIS.pk_thesis_id
    FROM T_THESIS
	WHERE T_THESIS.thesis_usable=1 AND T_THESIS.fk_thesis_state_id = workingStateId
    LIMIT 0,1
);
SET nextThesisId =(
    SELECT T_THESIS.pk_thesis_id
    FROM T_THESIS
	WHERE T_THESIS.pk_thesis_id > currThesisId AND T_THESIS.fk_thesis_state_id = readyStateId
    ORDER BY T_THESIS.thesis_time ASC
    LIMIT 0,1
);

UPDATE T_THESIS 
SET fk_thesis_state_id=endStateId, thesis_end_time=CURRENT_TIMESTAMP
WHERE pk_thesis_id=currThesisId;

UPDATE T_THESIS 
SET fk_thesis_state_id=workingStateId, thesis_start_time=CURRENT_TIMESTAMP
WHERE pk_thesis_id=nextThesisId;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2016-04-18  9:17:06
